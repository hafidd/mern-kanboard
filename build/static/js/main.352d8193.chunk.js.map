{"version":3,"sources":["context/user.js","context/hooks/useUser.js","api/user.js","components/Header.js","components/ErrMsg.js","components/auth/Login.js","components/auth/Register.js","helpers.js","api/board.js","components/Modal/index.js","components/kanban/Log.js","components/kanban/ItemDetail.js","sio.js","components/kanban/index.js","components/boards/NewBoard.js","components/boards/BoardList.js","components/boards/index.js","components/toast/index.js","App.js","serviceWorker.js","context/index.js","index.js"],"names":["State","React","createContext","Dispatch","initialState","_id","name","email","boardRoles","loading","err","reducer","state","action","type","payload","console","log","User","Provider","children","useReducer","dispatch","value","user","useContext","login","password","data","axios","post","res","localStorage","setItem","JSON","stringify","response","register","logout","removeItem","error","reloadBoardRoles","put","updatedUser","savedUser","getItem","parse","clearErr","useClearErr","useEffect","useSetUser","get","useUser","history","useHistory","className","onClick","push","style","color","cursor","fontSize","margin","padding","marginLeft","msg","errors","map","e","i","key","useState","setEmail","setPassword","to","onSubmit","preventDefault","placeholder","onChange","target","href","setName","password2","setPassword2","sbmt","fontColor","hexcolor","slice","length","split","hex","join","parseInt","substr","addBoard","updateBoard","loadBoard","id","loadLogs","item","newItem","updateItem","title","visible","setVisible","closeModal","c","Log","logs","showUser","getLogText","formatDate","dt","Date","date","deleteItem","team","labels","modal","setModal","modalTitle","setModalTitle","modalContent","setModalContent","openModal","content","Name","itemName","rename","old","new","Labels","Members","members","DueDate","itemDd","dd","Desc","submitDesc","itemDesc","desc","CheckList","checkList","window","confirm","UpdateLabels","pLabels","submitNewLabel","deleteLabel","UpdateMembers","submitNewMember","UpdateChecklist","submitNewCheckList","deleteCheckList","defaultValue","setDesc","rows","label","borderRadius","background","member","reduce","ac","completed","check","checked","date1","date2","setDd","placeholderText","selected","showTimeSelect","timeFormat","timeIntervals","timeCaption","dateFormat","props","setColor","ColorBtn","width","height","border","marginBottom","float","marginTop","trim","maxWidth","textAlign","l","boxShadow","memberIds","m","indexOf","io","memo","addToast","board","setBoard","lists","setLists","setLoading","selectedListId","setSelectedListId","selectedListName","setSelectedListName","selectedItem","setSelectedItem","setLogs","selectedMember","setSelectedMember","open","setNewItem","myRole","setMyRole","useParams","useCallback","boardLoaded","boardApi","role","toastText","emit","on","prevLists","newList","prevLogs","newLog","prevList","cloneDeep","ls","list","items","reorder","update","filter","lb","cl","mb","prevItem","prevBoard","toString","t","prevSelected","ok","listId","itemId","forEach","off","find","source","destination","revert","newLists","droppableId","splice","index","onDragEnd","sourceList","destinationList","submitNewItem","selectedList","listName","delete","d","getDate","toLocaleString","month","getFullYear","toLocaleTimeString","hour","minute","hour12","deleteList","deleteBoard","showModal","arr","val","concat","undefined","a","NewListButton","KanbanHeader","display","flexWrap","flex","minWidth","List","isDragDisabled","draggableId","provided","snapshot","isDragging","draggableProps","ref","innerRef","dragHandleProps","droppableProps","ListItem","mm","aria-label","gender","direction","NewList","NewItem","ItemDetail","Member","MemberSetting","BoardSetting","setTitle","submitNewList","setRole","updateRole","overflow","readOnly","NewBoard","setBoards","ErrMsg","setErr","submit","prevBoards","boards","Board","Boards","b","getBoards","Title","BoardList","delToast","opacity","text","App","toast","setToast","close","boardId","socketio","connect","location","reload","ProtectedV2","prev","Math","random","setTimeout","Header","exact","path","Login","Register","Boolean","hostname","match","providers","Store","initial","parent","cloneElement","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.352d8193.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\n// Context\r\nconst State = React.createContext();\r\nconst Dispatch = React.createContext();\r\n\r\nconst initialState = {\r\n  _id: null,\r\n  name: null,\r\n  email: null,\r\n  boardRoles: [],\r\n  loading: false,\r\n  err: null,\r\n};\r\n\r\n// Reducer\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"LOADING_USER\":\r\n      return { ...state, loading: true, err: null };\r\n    case \"REGISTER_SUCCESS\":\r\n    case \"LOGIN_SUCCESS\":\r\n      return { ...action.payload, loading: false, err: null };\r\n    case \"ROLE_UPDATED\":\r\n      return {\r\n        ...state,\r\n        boardRoles: action.payload,\r\n        loading: false,\r\n        err: null,\r\n      };\r\n    case \"LOGIN_ERROR\":\r\n    case \"REGISTER_ERROR\":\r\n      return { ...state, loading: false, err: action.payload };\r\n    case \"CLEAR_ERR\":\r\n      return { ...state, err: null };\r\n    case \"LOGOUT_SUCCESS\":\r\n      console.log(`logout...`);\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Provider\r\nconst Provider = ({ children }) => {\r\n  const [state, dispatch] = React.useReducer(reducer, initialState);\r\n  return (\r\n    <State.Provider value={state}>\r\n      <Dispatch.Provider value={dispatch}>{children}</Dispatch.Provider>\r\n    </State.Provider>\r\n  );\r\n};\r\n\r\n// Export\r\nexport const User = {\r\n  State,\r\n  Dispatch,\r\n  Provider,\r\n};\r\n","import { useEffect, useContext } from \"react\";\r\nimport { User } from \"../user\";\r\nimport * as userApi from \"../../api/user\";\r\n\r\nexport default () => {\r\n  const user = useContext(User.State);\r\n  const dispatch = useContext(User.Dispatch);\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      dispatch({ type: \"LOADING_USER\" });\r\n      const res = await userApi.login({ email, password });\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n    } catch (error) {\r\n      if (error.response)\r\n        dispatch({ type: \"LOGIN_ERROR\", payload: error.response.data });\r\n    }\r\n  };\r\n\r\n  const register = async (name, email, password) => {\r\n    try {\r\n      dispatch({ type: \"LOADING\" });\r\n      const res = await userApi.register({ name, email, password });\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n      dispatch({\r\n        type: \"REGISTER_SUCCESS\",\r\n        payload: res.data,\r\n      });\r\n    } catch (error) {\r\n      if (error.response)\r\n        dispatch({ type: \"REGISTER_ERROR\", payload: error.response.data });\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await userApi.logout();\r\n      localStorage.removeItem(\"user\");\r\n      dispatch({ type: \"LOGOUT_SUCCESS\" });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const reloadBoardRoles = async () => {\r\n    try {\r\n      const boardRoles = await userApi.reloadBoardRoles();\r\n      const updatedUser = { ...user, boardRoles };\r\n      localStorage.setItem(\"user\", JSON.stringify(updatedUser));\r\n      console.log(\"boardRoles updated\", boardRoles);\r\n      dispatch({ type: \"ROLE_UPDATED\", payload: boardRoles });\r\n    } catch (error) {\r\n      logout();\r\n    }\r\n  };\r\n\r\n  const savedUser = localStorage.getItem(\"user\")\r\n    ? JSON.parse(localStorage.getItem(\"user\"))\r\n    : null;\r\n\r\n  const clearErr = () => dispatch({ type: \"CLEAR_ERR\" });\r\n  const useClearErr = () => {\r\n    useEffect(() => {\r\n      dispatch({ type: \"CLEAR_ERR\" });\r\n    }, []);\r\n  };\r\n\r\n  const useSetUser = () => {\r\n    useEffect(() => {\r\n      (async () => {\r\n        try {\r\n          dispatch({ type: \"LOADING_USER\" });\r\n          const res = await userApi.getData();\r\n          localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n          dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n        } catch (error) {\r\n          // logout\r\n          if (savedUser) {\r\n            localStorage.removeItem(\"user\");\r\n            dispatch({ type: \"LOGOUT_SUCCESS\" });\r\n          }\r\n        }\r\n      })();\r\n    }, []);\r\n  };\r\n\r\n  return {\r\n    user,\r\n    login,\r\n    register,\r\n    logout,\r\n    clearErr,\r\n    useClearErr,\r\n    savedUser,\r\n    useSetUser,\r\n    reloadBoardRoles,\r\n  };\r\n};\r\n","import axios from \"axios\";\r\n\r\nconst register = (data) => axios.post(\"/api/auth/register\", data);\r\nconst login = (data) => axios.post(\"/api/auth/login\", data);\r\nconst logout = () => axios.post(\"/api/auth/logout\");\r\nconst getData = () => axios.get(\"/api/auth/user-data\");\r\nconst reloadBoardRoles = () => axios.put(\"/api/auth/update-boardRoles\");\r\n\r\nexport { register, login, getData, logout, reloadBoardRoles };\r\n","import React from \"react\";\r\nimport useUser from \"../context/hooks/useUser\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function () {\r\n  const { user, logout } = useUser();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <h4\r\n        onClick={() => history.push(\"/\")}\r\n        style={{ color: \"white\", cursor: \"pointer\" }}\r\n      >\r\n        Kanban Board{\" \"}\r\n        <p style={{ fontSize: \"7pt\", margin: 0 }}>MERN +socket.io</p>\r\n      </h4>\r\n      <div className=\"header-menu-left\" style={{ padding: \"0 10px\" }}>\r\n        {/* <button className=\"btn1\">New</button> */}\r\n      </div>\r\n      <div className=\"header-menu-right\">\r\n        {/* <button className=\"btn1\">New Board</button> */}\r\n        <button className=\"btn1\">{user._id ? user.name : \"Guest\"}</button>\r\n        {user._id && (\r\n          <button\r\n            style={{ marginLeft: 2 }}\r\n            className=\"btn1\"\r\n            onClick={() => logout()}\r\n          >\r\n            Logout\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n//import { useStateValue } from \"../context\";\r\n\r\nexport default function ({ msg = true, error }) {\r\n  if (!error) return null;\r\n  return (\r\n    <div className=\"error-msg\">\r\n      {msg ? error.msg ? <p>{error.msg}</p> : \"Err\" : \"\"}\r\n      <ul>\r\n        {error.errors && error.errors.map((e, i) => <li key={i}>{e}</li>)}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport useUser from \"../../context/hooks/useUser\";\r\n\r\nimport ErrMsg from \"../ErrMsg\";\r\nimport \"./Auth.css\";\r\n\r\nexport default function () {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { user, login, useClearErr } = useUser();\r\n\r\n  useClearErr();\r\n\r\n  if (user._id) return <Redirect to=\"/\" />;\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <h2>Login</h2>\r\n      <ErrMsg error={user.err} />\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          login(email, password);\r\n        }}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <br />\r\n        <button className=\"btn1\">Login</button>\r\n        <Link to=\"/register\" href=\"\">\r\n          Register\r\n        </Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport useUser from \"../../context/hooks/useUser\";\r\n\r\nimport ErrMsg from \"../ErrMsg\";\r\n\r\nexport default function () {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [password2, setPassword2] = useState(\"\");\r\n\r\n  const { user, register, useClearErr } = useUser();\r\n\r\n  useClearErr();\r\n\r\n  if (user._id) return <Redirect to=\"/\" />;\r\n\r\n  const sbmt = (e) => {\r\n    e.preventDefault();\r\n    if (password !== password2) return;\r\n    register(name, email, password);\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <h2>Register</h2>\r\n      <ErrMsg msg={false} error={user.err} />\r\n      <form onSubmit={(e) => sbmt(e)}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"nama\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"konfirmasi password\"\r\n          value={password2}\r\n          onChange={(e) => setPassword2(e.target.value)}\r\n        />\r\n        <br />\r\n        <button className=\"btn1\">Register</button>\r\n        <Link to=\"/login\">Login</Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","const compareDates = (date1, date2) => {\r\n  if (date1 === date2) return true;\r\n  if (date1 > date2 || date1 < date2) return false;\r\n  return true;\r\n};\r\n\r\nconst fontColor = (hexcolor) => {\r\n  // If a leading # is provided, remove it\r\n  if (hexcolor.slice(0, 1) === \"#\") {\r\n    hexcolor = hexcolor.slice(1);\r\n  }\r\n\r\n  // If a three-character hexcode, make six-character\r\n  if (hexcolor.length === 3) {\r\n    hexcolor = hexcolor\r\n      .split(\"\")\r\n      .map(function (hex) {\r\n        return hex + hex;\r\n      })\r\n      .join(\"\");\r\n  }\r\n\r\n  // Convert to RGB value\r\n  var r = parseInt(hexcolor.substr(0, 2), 16);\r\n  var g = parseInt(hexcolor.substr(2, 2), 16);\r\n  var b = parseInt(hexcolor.substr(4, 2), 16);\r\n\r\n  // Get YIQ ratio\r\n  var yiq = (r * 299 + g * 587 + b * 114) / 1000;\r\n\r\n  // Check contrast\r\n  return yiq >= 128 ? \"black\" : \"white\";\r\n};\r\n\r\nexport { compareDates, fontColor };\r\n","import axios from \"axios\";\r\n\r\nconst loadBoards = () => axios.get(\"/api/boards\");\r\nconst addBoard = (data) => axios.post(\"/api/boards\", data);\r\nconst updateBoard = (data) => axios.put(\"/api/board\", data);\r\n\r\nconst loadBoard = (id) => axios.get(\"/api/board/\" + id);\r\nconst loadLogs = (id, item = null) =>\r\n  axios.get(`/api/board/${id}/log/${item !== null ? item : \"\"}`);\r\nconst newList = (data) => axios.post(\"/api/board/lists\", data);\r\nconst newItem = (data) => axios.post(\"/api/board/items\", data);\r\nconst updateItem = (data) => axios.put(\"/api/board/items\", data);\r\nconst reorder = (data) => axios.put(\"/api/board/reorder\", data);\r\nconst setBoardRole = (data) => axios.put(\"/api/board/set-role\", data);\r\nconst deleteItem = (data) => axios.delete(\"/api/board/item\", { data });\r\nconst deleteList = (data) => axios.delete(\"/api/board/list\", { data });\r\nconst deleteBoard = (data) => axios.delete(\"/api/board/\", { data });\r\n\r\nexport {\r\n  loadBoards,\r\n  addBoard,\r\n  updateBoard,\r\n  loadBoard,\r\n  loadLogs,\r\n  newList,\r\n  newItem,\r\n  updateItem,\r\n  reorder,\r\n  setBoardRole,\r\n  deleteBoard,\r\n  deleteList,\r\n  deleteItem,\r\n};\r\n","import React from \"react\";\r\nimport \"./Modal.css\";\r\n\r\nexport default function ({\r\n  title = \"\",\r\n  visible = true,\r\n  setVisible = null,\r\n  closeModal,\r\n  c = null,\r\n  children,\r\n}) {\r\n  console.log()\r\n  return (\r\n    <div className={`overlay ${visible && \"visible\"} ${c && c}`}>\r\n      <div className=\"modal\">\r\n        <div className=\"modal-head\">\r\n          <span className=\"modal-title\">{title}</span>\r\n          <button\r\n            className=\"modal-close\"\r\n            onClick={() => {\r\n              if (closeModal) closeModal();\r\n              else setVisible(false);\r\n            }}\r\n          >\r\n            <span>&times;</span>\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-body\">{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Log({\r\n  logs,\r\n  item = null,\r\n  showUser = true,\r\n  getLogText,\r\n  formatDate,\r\n}) {\r\n  return (\r\n    <>\r\n      {item !== null ? (\r\n        <>\r\n          <h4>Item : {item.name}</h4>\r\n          <br />\r\n        </>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {logs.map((dt, i) => {\r\n        return (\r\n          <div key={dt._id}>\r\n            <small>{formatDate(new Date(dt.date))}</small> <br />\r\n            <p>\r\n              {showUser && (\r\n                <>\r\n                  <b>{dt.user.name}</b>{\" \"}\r\n                </>\r\n              )}\r\n              {getLogText({ dt, item })}\r\n            </p>\r\n            {logs.length > i + 1 ? <hr /> : \"\"}\r\n          </div>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nimport { compareDates, fontColor } from \"../../helpers\";\r\n\r\nimport \"./Item.css\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nimport Modal from \"../Modal\";\r\nimport Log from \"./Log\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function ({\r\n  item,\r\n  updateItem,\r\n  formatDate,\r\n  getLogText,\r\n  deleteItem,\r\n  team,\r\n  labels,\r\n  logs = [],\r\n}) {\r\n  const [modal, setModal] = useState(false);\r\n  const [modalTitle, setModalTitle] = useState(\"\");\r\n  const [modalContent, setModalContent] = useState(null);\r\n\r\n  const openModal = (title = \"title\", content = null, data) => {\r\n    setModalTitle(title);\r\n    setModalContent(content);\r\n    setModal(true);\r\n  };\r\n\r\n  const submitNewLabel = (data) => updateItem(\"new-label\", data);\r\n  const deleteLabel = (data) => updateItem(\"delete-label\", data);\r\n  const submitDesc = (data) => updateItem(\"update-desc\", data);\r\n  const submitNewMember = (data) => updateItem(\"new-member\", data);\r\n  const submitNewCheckList = (data) => updateItem(\"new-checklist\", data);\r\n  const deleteCheckList = (data) => updateItem(\"delete-checklist\", data);\r\n  const rename = (data) =>\r\n    updateItem(\"rename-item\", { old: item.name, new: data });\r\n\r\n  return (\r\n    <div className=\"item-detail\">\r\n      <Name itemName={item.name} rename={rename} />\r\n      <div className=\"flex-wrap-1 mb1\">\r\n        <div className=\"mr2\">\r\n          <Labels labels={item.labels} openModal={openModal} />\r\n        </div>\r\n        <div className=\"mr2\">\r\n          <Members openModal={openModal} members={item.members} />\r\n        </div>\r\n        <div>\r\n          <DueDate itemDd={item.dd} updateItem={updateItem} />\r\n        </div>\r\n      </div>\r\n      <div className=\"mb1\">\r\n        <Desc submitDesc={submitDesc} itemDesc={item.desc} />\r\n      </div>\r\n      <div className=\"mb1\">\r\n        <CheckList\r\n          checkList={item.checkList}\r\n          openModal={openModal}\r\n          updateItem={updateItem}\r\n        />\r\n      </div>\r\n      <div className=\"mb1\">\r\n        <button\r\n          className=\"btn1\"\r\n          onClick={() => openModal(item.name + \" activity\", \"log\")}\r\n        >\r\n           Activity Log\r\n        </button>\r\n        <button\r\n          className=\"btn1 fr bg-red\"\r\n          onClick={() => {\r\n            if (window.confirm(`delete card ${item.name}?`))\r\n              deleteItem(item._id);\r\n          }}\r\n        >\r\n          Delete\r\n        </button>\r\n      </div>\r\n\r\n      <Modal title={modalTitle} visible={modal} setVisible={setModal} c=\"z999\">\r\n        {modalContent === \"labels\" ? (\r\n          <UpdateLabels\r\n            labels={item.labels}\r\n            pLabels={labels}\r\n            submitNewLabel={submitNewLabel}\r\n            deleteLabel={deleteLabel}\r\n            fontColor={fontColor}\r\n          />\r\n        ) : modalContent === \"members\" ? (\r\n          <UpdateMembers\r\n            members={item.members}\r\n            submitNewMember={submitNewMember}\r\n            team={team}\r\n            updateItem={updateItem}\r\n          />\r\n        ) : modalContent === \"checklist\" ? (\r\n          <UpdateChecklist\r\n            checkList={item.checkList}\r\n            submitNewCheckList={submitNewCheckList}\r\n            deleteCheckList={deleteCheckList}\r\n          />\r\n        ) : modalContent === \"log\" ? (\r\n          <Log\r\n            item={item}\r\n            logs={logs}\r\n            formatDate={formatDate}\r\n            getLogText={getLogText}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Name({ itemName, rename }) {\r\n  const [name, setName] = useState(\"\");\r\n  useEffect(() => setName(itemName), []);\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"bold\">Name: </p>\r\n      <input\r\n        className=\"fw\"\r\n        type=\"text\"\r\n        defaultValue={itemName}\r\n        onChange={(e) => setName(e.target.value)}\r\n      ></input>\r\n      {name !== itemName && (\r\n        <button className=\"btn2\" onClick={() => rename(name)}>\r\n          Save\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Desc({ itemDesc, submitDesc }) {\r\n  const [desc, setDesc] = useState(\"\");\r\n  useEffect(() => setDesc(itemDesc), []);\r\n\r\n  return (\r\n    <>\r\n      <p className=\"bold\">Description</p>\r\n      <textarea\r\n        className=\"fw\"\r\n        rows=\"5\"\r\n        defaultValue={itemDesc}\r\n        onChange={(e) => setDesc(e.target.value)}\r\n      ></textarea>\r\n      {desc !== itemDesc && (\r\n        <button className=\"btn2\" onClick={() => submitDesc(desc)}>\r\n          Save\r\n        </button>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Labels({ labels, openModal }) {\r\n  return (\r\n    <>\r\n      <p className=\"bold\">Labels</p>\r\n      <ul>\r\n        {labels.map((label, i) => (\r\n          <li\r\n            key={i}\r\n            className=\"fl mr1 mb1 p1 font10 bold\"\r\n            style={{\r\n              borderRadius: \"2%\",\r\n              background: label.color || \"white\",\r\n              color: fontColor(label.color || \"#fff\"),\r\n            }}\r\n          >\r\n            {label.name}\r\n          </li>\r\n        ))}\r\n        <li className=\"fl mr1 mb1\">\r\n          <button\r\n            className=\"btn2\"\r\n            onClick={() => openModal(\"Labels\", \"labels\", labels)}\r\n          >\r\n            <span> &#9998; </span>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Members({ members, openModal }) {\r\n  return (\r\n    <>\r\n      <p className=\"bold\">Members</p>\r\n      <ul className=\"\">\r\n        {members &&\r\n          members.map((member, i) => (\r\n            <li key={i + member._id} className=\"fl mr1 mb1 p1 outline\">\r\n              {member.name}\r\n            </li>\r\n          ))}\r\n        <li className=\"fl mr1 mb1 p1\">\r\n          <button\r\n            className=\"btn2\"\r\n            onClick={() => openModal(\"Members\", \"members\", members)}\r\n          >\r\n            <span> &#9998; </span>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction CheckList({ checkList, updateItem, openModal }) {\r\n  return (\r\n    <>\r\n      <p className=\"bold\">\r\n        Checklist\r\n        {checkList.length ? (\r\n          <span>\r\n            {\" (\"}\r\n            {checkList.reduce((ac, c) => (c.completed ? ac + 1 : ac), 0)}/\r\n            {checkList.length}\r\n            {\")\"}\r\n          </span>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </p>\r\n      <ul>\r\n        {checkList.map((check, i) => (\r\n          <li key={i}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={check.completed}\r\n              value={check._id}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                updateItem(\"update-checklist\", {\r\n                  _id: check._id,\r\n                  name: check.name,\r\n                  completed: !check.completed,\r\n                });\r\n              }}\r\n            />{\" \"}\r\n            {check.name}\r\n          </li>\r\n        ))}\r\n        <li>\r\n          <button\r\n            className=\"btn2\"\r\n            onClick={() => openModal(\"Checklist\", \"checklist\", checkList)}\r\n          >\r\n            <span> &#9998; </span>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction DueDate({ itemDd, updateItem }) {\r\n  const [dd, setDd] = useState(null);\r\n  useEffect(() => setDd(itemDd ? new Date(itemDd) : null), []);\r\n\r\n  return (\r\n    <>\r\n      <p className=\"bold\">Due date</p>\r\n      <DatePicker\r\n        placeholderText=\"&#9998;\"\r\n        selected={dd ? dd : itemDd ? new Date(itemDd) : null}\r\n        onChange={(date) => setDd(date)}\r\n        showTimeSelect\r\n        timeFormat=\"HH:mm\"\r\n        timeIntervals={15}\r\n        timeCaption=\"time\"\r\n        dateFormat=\"d MMMM yyyy H:mm\"\r\n      />\r\n      {!compareDates(dd, itemDd ? new Date(itemDd) : null) && (\r\n        <button className=\"btn2\" onClick={() => updateItem(\"update-dd\", dd)}>\r\n          Save\r\n        </button>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction UpdateLabels(props) {\r\n  const { labels, submitNewLabel, deleteLabel, pLabels, fontColor } = props;\r\n  const [name, setName] = useState(\"\");\r\n  const [color, setColor] = useState(\"#FFFFFF\");\r\n\r\n  const ColorBtn = ({ color }) => (\r\n    <button\r\n      type=\"button\"\r\n      style={{\r\n        padding: 0,\r\n        width: 22,\r\n        height: 22,\r\n        marginLeft: 5,\r\n        border: \"none\",\r\n        background: color,\r\n        cursor: \"pointer\",\r\n      }}\r\n      onClick={() => setColor(color)}\r\n    ></button>\r\n  );\r\n\r\n  return (\r\n    <ul>\r\n      {labels.map((label, i) => (\r\n        <li\r\n          key={i}\r\n          style={{\r\n            background: label.color || \"white\",\r\n            color: fontColor(label.color || \"#fff\"),\r\n            border: \"1px solid black\",\r\n            padding: 2,\r\n            marginBottom: 1,\r\n          }}\r\n        >\r\n          {label.name}{\" \"}\r\n          <button\r\n            className=\"btn2\"\r\n            type=\"button\"\r\n            style={{ float: \"right\" }}\r\n            onClick={() => deleteLabel({ _id: label._id, name: label.name })}\r\n          >\r\n            x\r\n          </button>\r\n        </li>\r\n      ))}\r\n      <li style={{ marginTop: 4 }}>\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            if (name.trim()) submitNewLabel({ name, color });\r\n            setName(\"\");\r\n          }}\r\n        >\r\n          <div style={{ background: \"#f3f2f0\", padding: 4 }}>\r\n            <div className=\"fw\">\r\n              <input\r\n                className=\"fw\"\r\n                type=\"text\"\r\n                placeholder=\"New label\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"color\"\r\n                style={{ padding: 0 }}\r\n                value={color}\r\n                onChange={(e) => setColor(e.target.value)}\r\n              />\r\n              {[\"#ff0000\", \"#00ff00\", \"#0000ff\", \"#ffff00\"].map((color) => (\r\n                <ColorBtn key={color} color={color} />\r\n              ))}\r\n            </div>\r\n            <div\r\n              style={{\r\n                maxWidth: \"300px\",\r\n                padding: \"5px 0\",\r\n\r\n                textAlign: \"center\",\r\n              }}\r\n            >\r\n              {pLabels.map((l, i) => (\r\n                <button\r\n                  key={i}\r\n                  type=\"button\"\r\n                  style={{\r\n                    background: l.color,\r\n                    color: fontColor(l.color || \"#fff\"),\r\n                    border: \"none\",\r\n                    boxShadow: \"0 1px 0 #091e4240\",\r\n                    margin: \"1px\",\r\n                    padding: 1,\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setName(l.name);\r\n                    setColor(l.color);\r\n                  }}\r\n                >\r\n                  {l.name}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <button className=\"fw btn1\">Add</button>\r\n          </div>\r\n        </form>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nfunction UpdateMembers(props) {\r\n  const { members, team, updateItem } = props;\r\n  const memberIds = members.map((m) => m._id);\r\n\r\n  return (\r\n    <ul>\r\n      {team.map((member, i) => (\r\n        <li key={i} className=\"p1\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name={member._id}\r\n            value={member._id}\r\n            checked={memberIds.indexOf(member._id) !== -1}\r\n            onChange={(e) => {\r\n              console.log({\r\n                _id: e.target.value,\r\n                checked: e.target.checked,\r\n              });\r\n              updateItem(\"update-members\", {\r\n                _id: e.target.value,\r\n                name: member.name,\r\n                checked: e.target.checked,\r\n              });\r\n            }}\r\n          />{\" \"}\r\n          {member.name}\r\n        </li>\r\n      ))}\r\n      <li></li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nfunction UpdateChecklist(props) {\r\n  const { checkList, submitNewCheckList, deleteCheckList } = props;\r\n  const [name, setName] = useState(\"\");\r\n\r\n  return (\r\n    <ul>\r\n      {checkList.length ? (\r\n        checkList.map((check, i) => (\r\n          <li key={i + check._id} style={{ marginBottom: 1 }}>\r\n            <button\r\n              className=\"btn1\"\r\n              onClick={() =>\r\n                deleteCheckList({ _id: check._id, name: check.name })\r\n              }\r\n            >\r\n              x\r\n            </button>{\" \"}\r\n            {check.name}\r\n          </li>\r\n        ))\r\n      ) : (\r\n        <li>Belum ada checklist</li>\r\n      )}\r\n      <li>\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            if (name.trim()) submitNewCheckList({ name });\r\n            setName(\"\");\r\n          }}\r\n        >\r\n          <div className=\"fw\">\r\n            <input\r\n              className=\"fw\"\r\n              type=\"text\"\r\n              placeholder=\"New list\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </div>\r\n          <button className=\"fw btn1\">Add</button>\r\n        </form>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n","import socketio from \"socket.io-client\";\r\nexport let io = null;\r\nexport const connect = (boardId = \"\") =>\r\n  (io = socketio.connect(`/?board=${boardId}`));\r\nexport const disconnect = () => io.close();\r\n","import React, { useEffect, useState, useCallback } from \"react\";\r\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { cloneDeep } from \"lodash\";\r\nimport { fontColor } from \"../../helpers\";\r\n\r\nimport useUser from \"../../context/hooks/useUser\";\r\n\r\nimport * as boardApi from \"../../api/board\";\r\n\r\nimport Modal from \"../Modal\";\r\nimport ItemDetail from \"./ItemDetail\";\r\nimport Log from \"./Log\";\r\n\r\nimport { io } from \"../../sio\";\r\n\r\nexport default React.memo(({ addToast }) => {\r\n  const [board, setBoard] = useState({});\r\n  const [lists, setLists] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [modal, setModal] = useState(false);\r\n  const [modalTitle, setModalTitle] = useState(null);\r\n  const [modalContent, setModalContent] = useState(null);\r\n\r\n  const [selectedListId, setSelectedListId] = useState(null);\r\n  const [selectedListName, setSelectedListName] = useState(\"\");\r\n\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [logs, setLogs] = useState([]);\r\n\r\n  const [selectedMember, setSelectedMember] = useState(null);\r\n\r\n  const [newItem, setNewItem] = useState({ open: false, name: \"\" });\r\n\r\n  const [myRole, setMyRole] = useState(\"\");\r\n\r\n  const { id } = useParams(); // id board\r\n  const history = useHistory();\r\n\r\n  const { user, reloadBoardRoles } = useUser();\r\n\r\n  const loadBoard = useCallback(async () => {\r\n    setLoading(true);\r\n    let boardLoaded = false;\r\n    try {\r\n      // load board detail\r\n      const { data } = await boardApi.loadBoard(id);\r\n      boardLoaded = true;\r\n      setLists(data.lists);\r\n      delete data.lists;\r\n      setBoard({\r\n        ...data,\r\n        team: [{ ...data.user, role: \"owner\" }, ...data.team],\r\n      });\r\n      // load logs\r\n      const logs = await boardApi.loadLogs(id);\r\n      setLogs(logs.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      if (!boardLoaded) history.push(\"/\");\r\n    }\r\n  }, [id, history]);\r\n\r\n  // socketio events\r\n  useEffect(() => {\r\n    if (io) {\r\n      const toastText = (log) => {\r\n        console.log(getLogText({ dt: log }));\r\n        return log.user._id !== user._id\r\n          ? log.user.name + \" \" + getLogText({ dt: log })\r\n          : \"\" + getLogText({ dt: log });\r\n      };\r\n\r\n      io.emit(\"join\", id);\r\n      io.on(\"server-reload\", () => {\r\n        io.emit(\"join\", id);\r\n      });\r\n\r\n      io.on(\"new-list\", (data) => {\r\n        setLists((prevLists) => [...prevLists, data.newList]);\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"new-item\", (data) => {\r\n        //console.log(\"new-item\", data);\r\n        setLists((prevList) => {\r\n          const newList = cloneDeep(prevList).map((ls) => {\r\n            if (ls._id === data.newLog.list._id) ls.items.push(data.newItem);\r\n            return ls;\r\n          });\r\n          return newList;\r\n        });\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"reorder\", (data) => {\r\n        setLists((prevList) => reorder(prevList, data.data));\r\n        setLogs((prevLogs) => [data.log, ...prevLogs]);\r\n        addToast(toastText(data.log));\r\n      });\r\n      io.on(\"update-item\", (data) => {\r\n        //console.log(\"update-item\", data);\r\n        setLists((prevList) =>\r\n          cloneDeep(prevList).map((list) => {\r\n            if (list._id === data.log.list._id)\r\n              list.items = list.items.map((item) => {\r\n                if (item._id === data.log.item._id) {\r\n                  if (data.log.action === \"new-label\")\r\n                    item.labels.push(data.update);\r\n                  else if (data.log.action === \"delete-label\")\r\n                    item.labels = item.labels.filter(\r\n                      (lb) => lb._id !== data.update._id\r\n                    );\r\n                  else if (data.log.action === \"update-desc\")\r\n                    item.desc = data.update;\r\n                  else if (data.log.action === \"update-dd\")\r\n                    item.dd = data.update;\r\n                  else if (data.log.action === \"rename-item\") {\r\n                    item.name = data.update.new;\r\n                  } else if (data.log.action === \"new-checklist\")\r\n                    item.checkList.push(data.update);\r\n                  else if (data.log.action === \"update-checklist\")\r\n                    item.checkList = item.checkList.map((cl) => {\r\n                      if (cl._id === data.update._id)\r\n                        cl.completed = data.update.completed;\r\n                      return cl;\r\n                    });\r\n                  else if (data.log.action === \"delete-checklist\")\r\n                    item.checkList = item.checkList.filter(\r\n                      (cl) => cl._id !== data.update._id\r\n                    );\r\n                  else if (data.log.action === \"update-members\") {\r\n                    if (data.update.checked)\r\n                      item.members.push(data.update.user);\r\n                    else\r\n                      item.members = item.members.filter(\r\n                        (mb) => mb._id !== data.update._id\r\n                      );\r\n                  }\r\n\r\n                  setSelectedItem((prevItem) =>\r\n                    prevItem !== null && prevItem._id === item._id\r\n                      ? item\r\n                      : prevItem\r\n                  );\r\n                }\r\n                return item;\r\n              });\r\n            return list;\r\n          })\r\n        );\r\n        setLogs((prevLogs) => [data.log, ...prevLogs]);\r\n        addToast(toastText(data.log));\r\n      });\r\n      io.on(\"add-member\", async (data) => {\r\n        if (!data.newLog) return reloadBoardRoles();\r\n        setBoard((prevBoard) => ({\r\n          ...prevBoard,\r\n          team: [...prevBoard.team, data.user],\r\n        }));\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"delete-member\", async (data) => {\r\n        if (data.user._id.toString() === user._id.toString())\r\n          return history.push(\"/\");\r\n        // update board& logs\r\n        setBoard((prevBoard) => ({\r\n          ...prevBoard,\r\n          team: prevBoard.team.filter(\r\n            (t) => t._id.toString() !== data.user._id.toString()\r\n          ),\r\n        }));\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        closeModal();\r\n        setSelectedMember(null);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"update-role\", async (data) => {\r\n        // update board & logs\r\n        setBoard((prevBoard) => ({\r\n          ...prevBoard,\r\n          team: prevBoard.team.map((member) => ({\r\n            ...member,\r\n            role:\r\n              member._id === data.update.user._id\r\n                ? data.update.role\r\n                : member.role,\r\n          })),\r\n        }));\r\n        setLogs((prevLogs) => [data.log, ...prevLogs]);\r\n        setSelectedMember((prevSelected) =>\r\n          prevSelected !== null\r\n            ? {\r\n                ...prevSelected,\r\n                role:\r\n                  prevSelected._id === data.update.user._id\r\n                    ? data.update.role\r\n                    : prevSelected.role,\r\n              }\r\n            : null\r\n        );\r\n        addToast(toastText(data.log));\r\n      });\r\n      io.on(\"rename-board\", async (data) => {\r\n        setBoard((prevBoard) => ({ ...prevBoard, name: data.data }));\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"edit-board-desc\", async (data) => {\r\n        setBoard((prevBoard) => ({ ...prevBoard, desc: data.data }));\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"delete-item\", (data) => {\r\n        if (data.update.ok === 0) return false;\r\n        setLists((prevLists) =>\r\n          prevLists.map((l) => ({\r\n            ...l,\r\n            items:\r\n              l._id === data.listId\r\n                ? l.items.filter((i) => i._id !== data.itemId)\r\n                : l.items,\r\n          }))\r\n        );\r\n        closeModal();\r\n        //setSelectedItem(null);\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n      io.on(\"delete-list\", (data) => {\r\n        if (data.update.ok === 0) return false;\r\n        setLists((prevLists) => prevLists.filter((l) => l._id !== data.listId));\r\n        setLogs((prevLogs) => [data.newLog, ...prevLogs]);\r\n        addToast(toastText(data.newLog));\r\n      });\r\n\r\n      io.on(\"delete-board\", (data) => {\r\n        if (id === data) history.push(\"/\");\r\n      });\r\n      io.on(\"new-roles\", () => reloadBoardRoles());\r\n    }\r\n    return () => {\r\n      if (io) {\r\n        //console.log(\"io x<\");\r\n        [\r\n          \"new-item\",\r\n          \"new-list\",\r\n          \"reorder\",\r\n          \"update-item\",\r\n          \"delete-member\",\r\n          \"update-role\",\r\n          \"new-roles\",\r\n          \"server-reload\",\r\n        ].forEach((t) => io.off(t));\r\n        io.emit(\"leave\", id);\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [io]);\r\n\r\n  useEffect(() => {\r\n    if (board.team) {\r\n      const role = board.team.find((t) => t._id === user._id).role;\r\n      if (role !== myRole) setMyRole(role);\r\n    }\r\n  }, [board.team]);\r\n\r\n  useEffect(() => {\r\n    user._id && loadBoard();\r\n  }, [user._id, loadBoard]);\r\n\r\n  useEffect(() => {\r\n    if (modalContent === \"detail\") setModalTitle(selectedItem.name);\r\n  }, [selectedItem, modalContent]);\r\n\r\n  const reorder = (lists, { source, destination, type }, revert = false) => {\r\n    if (revert) {\r\n      [source, destination] = [destination, source];\r\n    }\r\n    if (type === \"item\") {\r\n      const newLists = JSON.parse(JSON.stringify(lists));\r\n      const [item] = newLists\r\n        .find((l) => l._id === source.droppableId)\r\n        .items.splice(source.index, 1);\r\n      if (!item) return false;\r\n      return newLists.map((l) => {\r\n        if (l._id === destination.droppableId)\r\n          l.items.splice(destination.index, 0, item);\r\n        return l;\r\n      });\r\n    } else {\r\n      const newLists = [...lists];\r\n      const [item] = newLists.splice(source.index, 1);\r\n      newLists.splice(destination.index, 0, item);\r\n      return newLists;\r\n    }\r\n  };\r\n\r\n  const onDragEnd = async (e) => {\r\n    const { source, destination, type } = e;\r\n    if (\r\n      !destination ||\r\n      (source.droppableId === destination.droppableId &&\r\n        source.index === destination.index)\r\n    )\r\n      return false;\r\n    // const newLists = reorder(lists, e);\r\n    // setLists(newLists);\r\n    try {\r\n      setLoading(true);\r\n      await boardApi.reorder({\r\n        id,\r\n        source,\r\n        destination,\r\n        type,\r\n      });\r\n      setLoading(false);\r\n    } catch (err) {\r\n      loadBoard(); // reload kalo gagal\r\n    }\r\n  };\r\n\r\n  const getLogText = ({ dt, item = selectedItem }) =>\r\n    dt.action === \"new-label\"\r\n      ? `menambah label '${dt.data}'\r\n        ${item === null ? `ke item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"delete-label\"\r\n      ? `menghapus label '${dt.data}' \r\n        ${item === null ? `di item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"update-desc\"\r\n      ? `mengubah deskripsi : '${dt.data.slice(0, 15)}' \r\n        ${dt.data.length > 15 ? \"....\" : \"\"}\r\n        ${item === null ? `pada item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"update-dd\"\r\n      ? `${dt.data === null ? \"menghapus\" : \"mengubah\"} tanggal \r\n        ${dt.data === null ? \"\" : `'${formatDate(new Date(dt.data))}'`} ${\r\n          item === null ? `pada item \"${dt.item.name}\"` : \"\"\r\n        }`\r\n      : dt.action === \"new-checklist\"\r\n      ? `menambah checklist '${dt.data}' \r\n        ${item === null ? `ke item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"delete-checklist\"\r\n      ? `menghapus checklist '${dt.data}' \r\n        ${item === null ? `pada item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"update-checklist\"\r\n      ? `mengubah checklist ${dt.data.completed ? \"\" : \"\"} \r\n        '${dt.data.name}'\r\n        ${item === null ? `pada item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"update-members\"\r\n      ? `${dt.data.checked ? \"menambah\" : \"menghapus\"} \r\n        member '${dt.data.name}' \r\n        ${item === null ? `pada item \"${dt.item.name}\"` : \"\"}`\r\n      : dt.action === \"new-board\"\r\n      ? `membuat board \"${dt.data}\"`\r\n      : dt.action === \"new-list\"\r\n      ? `membuat list \"${dt.data}\"`\r\n      : dt.action === \"new-item\"\r\n      ? `menambahkan item \"${dt.data}\" ke list \"${dt.list.name}\"`\r\n      : dt.action === \"reorder-item\"\r\n      ? `mengubah urutan item \"${dt.item.name}\" \r\n        ${dt.data.source.index + 1}\r\n         ${dt.data.destination.index + 1} \r\n        pada list \"${dt.list.name}\"`\r\n      : dt.action === \"reorder-list\"\r\n      ? `mengubah urutan list \"${dt.list.name}\" \r\n        ${dt.data.source.index + 1}\r\n         ${dt.data.destination.index + 1}`\r\n      : dt.action === \"move-item\"\r\n      ? `memindahkan item \"${dt.item.name}\"\r\n        dari \"${dt.sourceList.name}\" \r\n        ke \"${dt.destinationList.name}\"`\r\n      : dt.action === \"new-boardMember\"\r\n      ? `menambahkan member \"${dt.data.name}\"`\r\n      : dt.action === \"delete-boardMember\"\r\n      ? `mengeluarkan member \"${dt.data.name}\"`\r\n      : dt.action === \"update-role\"\r\n      ? `mengubah role \"${dt.data.user.name}\" ${dt.data.user.role}  ${dt.data.role}`\r\n      : dt.action === \"delete-item\"\r\n      ? `menghapus item \"${dt.item.name}\" pada list \"${dt.list.name}\"`\r\n      : dt.action === \"delete-list\"\r\n      ? `menghapus list ${dt.list.name}`\r\n      : dt.action === \"rename-board\"\r\n      ? `mengubah nama board  \"${dt.data}\"`\r\n      : dt.action === \"edit-board-desc\"\r\n      ? `mengubah deskripsi board  \"${dt.data}\"`\r\n      : dt.action === \"rename-item\"\r\n      ? `mengubah nama item \"${dt.data.old || \"\"}\"  \"${dt.data.new || \"\"}\"`\r\n      : \"-\";\r\n\r\n  const updateItem = async (action, data) => {\r\n    try {\r\n      setLoading(true);\r\n      await boardApi.updateItem({\r\n        id,\r\n        listId: selectedListId,\r\n        itemId: selectedItem._id,\r\n        itemName: selectedItem.name,\r\n        action,\r\n        data,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const submitNewItem = async (name = \"\") => {\r\n    try {\r\n      if (!name.trim()) return;\r\n      setLoading(true);\r\n      await boardApi.newItem({\r\n        id,\r\n        selectedList: selectedListId,\r\n        selectedListName,\r\n        name,\r\n      });\r\n\r\n      setNewItem({ open: false, name: \"\" });\r\n      setSelectedListId(null);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateBoard = async (action, data) => {\r\n    try {\r\n      await boardApi.updateBoard({\r\n        action: action,\r\n        id: board._id,\r\n        data: data,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"update board error\", error);\r\n      loadBoard();\r\n    }\r\n  };\r\n\r\n  const deleteItem = async (itemId) => {\r\n    try {\r\n      await boardApi.deleteItem({\r\n        id,\r\n        listId: selectedListId,\r\n        itemId,\r\n        listName: selectedListName,\r\n        itemName: selectedItem.name,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const formatDate = (d) =>\r\n    `${d.getDate()} ${d.toLocaleString(\"id-ID\", { month: \"long\" })} \r\n        ${d.getFullYear()} - \r\n        ${d.toLocaleTimeString(\"id-ID\", {\r\n          hour: \"2-digit\",\r\n          minute: \"2-digit\",\r\n          hour12: false,\r\n        })}`;\r\n\r\n  const deleteList = async (listId, listName) => {\r\n    try {\r\n      await boardApi.deleteList({\r\n        id,\r\n        listId,\r\n        listName,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const deleteBoard = async () => {\r\n    try {\r\n      await boardApi.deleteBoard({ id });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const showModal = (title = \"\", content, item = null) => {\r\n    if (item) setSelectedItem(item);\r\n    setModalTitle(title);\r\n    setModalContent(content);\r\n    setModal(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalTitle(\"\");\r\n    setModalContent(null);\r\n    setModal(false);\r\n\r\n    setSelectedItem(null);\r\n    setSelectedMember(null);\r\n  };\r\n\r\n  const labels = lists\r\n    .reduce((arr, val) => arr.concat(val.items), [])\r\n    .reduce((arr, val) => arr.concat(val.labels), [])\r\n    .reduce((arr, val) => {\r\n      if (\r\n        arr.find((a) => a.name === val.name && a.color === val.color) ===\r\n        undefined\r\n      )\r\n        return arr.concat({ name: val.name, color: val.color });\r\n      return arr;\r\n    }, []);\r\n\r\n  const NewListButton = () => (\r\n    <div className=\"board-list\">\r\n      <button className=\"btn-a\" onClick={() => showModal(\"New List\", \"list\")}>\r\n        + New list\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const KanbanHeader = () => (\r\n    <div className=\"board-menu flex-wrap-1\">\r\n      <h3 style={{ color: \"white\" }} className=\"mr2\">\r\n        {board.name}\r\n      </h3>\r\n\r\n      <ul\r\n        className=\"\"\r\n        style={{\r\n          display: \"flex\",\r\n          flexWrap: \"wrap\",\r\n          flex: 1,\r\n          minWidth: 200,\r\n        }}\r\n      >\r\n        {board.team &&\r\n          board.team.map((team) => (\r\n            <li\r\n              key={team._id}\r\n              className=\"mr1 p1\"\r\n              style={{\r\n                background: \"white\",\r\n              }}\r\n              onClick={() => {\r\n                setSelectedMember(team);\r\n                showModal(team.name, \"member-detail\");\r\n              }}\r\n            >\r\n              {team.name}\r\n            </li>\r\n          ))}\r\n        <li>\r\n          {myRole === \"admin\" || myRole === \"owner\" ? (\r\n            <button\r\n              className=\"fh btn1\"\r\n              onClick={() => showModal(\"Add member\", \"member\")}\r\n            >\r\n              +\r\n            </button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </li>\r\n      </ul>\r\n\r\n      <div style={{ display: \"flex\" }}>\r\n        <button\r\n          className=\"btn1\"\r\n          onClick={() => showModal(\"Settings\", \"settings\")}\r\n        >\r\n          \r\n        </button>\r\n        <button\r\n          className=\"btn1 ml1\"\r\n          onClick={() => showModal(\"Activity log\", \"log\")}\r\n        >\r\n          Activity\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const List = ({ d, i }) => (\r\n    <Draggable\r\n      isDragDisabled={loading}\r\n      type=\"list\"\r\n      // key={d._id}\r\n      draggableId={d._id}\r\n      index={i}\r\n    >\r\n      {(provided, snapshot) => (\r\n        <div\r\n          className={`board-list ${snapshot.isDragging ? \"dragging\" : \"\"}`}\r\n          {...provided.draggableProps}\r\n          ref={provided.innerRef}\r\n        >\r\n          <div {...provided.dragHandleProps} className=\"list-header\">\r\n            <strong>{d.title}</strong>\r\n            <button\r\n              className=\"btn-a bg-red fr\"\r\n              onClick={() => {\r\n                if (!window.confirm(`hapus list ${d.title}?`)) return false;\r\n                deleteList(d._id, d.title);\r\n              }}\r\n            >\r\n              <span style={{ color: \"white\" }}>x</span>\r\n            </button>\r\n          </div>\r\n          {/* item */}\r\n          <Droppable type=\"item\" droppableId={d._id}>\r\n            {(provided, snapshot) => (\r\n              <div\r\n                className=\"list-content\"\r\n                {...provided.droppableProps}\r\n                ref={provided.innerRef}\r\n              >\r\n                <ul>\r\n                  {d.items.map((list, i) => (\r\n                    <ListItem d={d} list={list} i={i} key={list._id} />\r\n                  ))}\r\n                  {newItem.open && selectedListId === d._id && (\r\n                    <div className=\"mt2\">\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"fw\"\r\n                        placeholder=\"enter card name...\"\r\n                        defaultValue={newItem.name}\r\n                        onChange={(e) =>\r\n                          setNewItem({\r\n                            ...newItem,\r\n                            name: e.target.value,\r\n                          })\r\n                        }\r\n                      />\r\n                      <button\r\n                        className=\"btn2 bg-green\"\r\n                        onClick={() => submitNewItem(newItem.name)}\r\n                      >\r\n                        Save\r\n                      </button>\r\n                      <button\r\n                        className=\"btn2 ml1\"\r\n                        onClick={() => {\r\n                          setNewItem({ open: false });\r\n                          setSelectedListId(null);\r\n                        }}\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                  {newItem.open && selectedListId === d._id ? (\r\n                    \"\"\r\n                  ) : (\r\n                    <button\r\n                      className=\"btn-a fw\"\r\n                      onClick={() => {\r\n                        setSelectedListId(d._id);\r\n                        setSelectedListName(d.title);\r\n                        //showModal(\"New Item\", \"item\");\r\n                        setNewItem({ open: true });\r\n                      }}\r\n                    >\r\n                      + New card\r\n                    </button>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </Droppable>\r\n        </div>\r\n      )}\r\n    </Draggable>\r\n  );\r\n\r\n  const ListItem = ({ d, list, i }) => (\r\n    <Draggable\r\n      isDragDisabled={loading}\r\n      type=\"item\"\r\n      key={list._id}\r\n      draggableId={list._id}\r\n      index={i}\r\n    >\r\n      {(provided, snapshot) => (\r\n        <li\r\n          className={`item ${snapshot.isDragging ? \"dragging\" : \"\"}`}\r\n          {...provided.draggableProps}\r\n          {...provided.dragHandleProps}\r\n          ref={provided.innerRef}\r\n          onClick={() => {\r\n            setSelectedListId(d._id);\r\n            setSelectedListName(d.title);\r\n            showModal(list.name, \"detail\", list);\r\n          }}\r\n        >\r\n          {/* <Item list={list} {...provided.draggableProps} /> */}\r\n          {/* name */}\r\n          <p className=\"bold font10\">{list.name}</p>\r\n          {/* labels */}\r\n          <div className=\"mt2\">\r\n            <ul className=\"flex-wrap-1\">\r\n              {list.labels &&\r\n                list.labels.map((label, i) => (\r\n                  <li\r\n                    key={label._id + i}\r\n                    className=\"mr1 mb1 p1 font8 bold\"\r\n                    style={{\r\n                      borderRadius: \"5%\",\r\n                      background: label.color || \"white\",\r\n                      color: fontColor(label.color || \"#fff\"),\r\n                    }}\r\n                  >\r\n                    {label.name}\r\n                  </li>\r\n                ))}\r\n            </ul>\r\n          </div>\r\n          {/* checklist */}\r\n          {list.checkList.length ? (\r\n            <div className=\"mt2 font10\">\r\n              Checklist{\" \"}\r\n              {list.checkList.reduce((ac, c) => (c.completed ? ac + 1 : ac), 0)}\r\n              /{list.checkList.length}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {/* members */}\r\n          {list.members.length ? (\r\n            <div className=\"mt2 font10\">\r\n              <ul className=\"flex-wrap-1\">\r\n                {list.members.map((mm) => (\r\n                  <li key={mm._id}>\r\n                    <span role=\"img\" aria-label=\"\" className=\"font12\">\r\n                      {mm.gender === \"m\"\r\n                        ? \"\"\r\n                        : mm.gender === \"f\"\r\n                        ? \"\"\r\n                        : \"\"}\r\n                    </span>\r\n                    <span>{mm.name}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {/* due date */}\r\n          {list.dd && (\r\n            <div className=\"font8 mt2\">\r\n              <span role=\"img\" aria-label=\"\">\r\n                \r\n              </span>{\" \"}\r\n              {new Date(list.dd).toLocaleString(\"id-ID\")}\r\n            </div>\r\n          )}\r\n        </li>\r\n      )}\r\n    </Draggable>\r\n  );\r\n\r\n  return (\r\n    <div className=\"board\">\r\n      {/* board name, member list */}\r\n      <KanbanHeader />\r\n      {/* kanban */}\r\n      <DragDropContext onDragEnd={(e) => onDragEnd(e)}>\r\n        <Droppable type=\"list\" direction=\"horizontal\" droppableId={\"content\"}>\r\n          {(provided, snapshot) => (\r\n            <div\r\n              className=\"board-content\"\r\n              {...provided.droppableProps}\r\n              ref={provided.innerRef}\r\n            >\r\n              {lists.map((d, i) => (\r\n                <List key={d._id} d={d} i={i} />\r\n              ))}\r\n              <NewListButton />\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n      {/* MODAL, new list,item,item detail,member */}\r\n      <Modal\r\n        title={modalTitle}\r\n        visible={modal}\r\n        setVisible={setModal}\r\n        closeModal={closeModal}\r\n      >\r\n        {modalContent === \"list\" ? (\r\n          <NewList id={id} setLoading={setLoading} setModal={setModal} />\r\n        ) : modalContent === \"item\" ? (\r\n          <NewItem\r\n            id={id}\r\n            selectedList={selectedListId}\r\n            selectedListName={selectedListName}\r\n            setLoading={setLoading}\r\n            setModal={setModal}\r\n          />\r\n        ) : modalContent === \"detail\" ? (\r\n          <ItemDetail\r\n            item={selectedItem}\r\n            updateItem={updateItem}\r\n            deleteItem={deleteItem}\r\n            formatDate={formatDate}\r\n            getLogText={getLogText}\r\n            team={board.team}\r\n            logs={logs.filter((l) => l.item && l.item._id === selectedItem._id)}\r\n            labels={labels}\r\n          />\r\n        ) : modalContent === \"member\" ? (\r\n          <Member\r\n            id={id}\r\n            board={board}\r\n            setLoading={setLoading}\r\n            setBoard={setBoard}\r\n            setLogs={setLogs}\r\n          />\r\n        ) : modalContent === \"member-detail\" ? (\r\n          <MemberSetting\r\n            id={id}\r\n            member={selectedMember}\r\n            myRole={myRole}\r\n            formatDate={formatDate}\r\n            getLogText={getLogText}\r\n            updateBoard={updateBoard}\r\n            logs={logs.filter((log) => log.user._id === selectedMember._id)}\r\n          />\r\n        ) : modalContent === \"log\" ? (\r\n          <Log logs={logs} formatDate={formatDate} getLogText={getLogText} />\r\n        ) : modalContent === \"settings\" ? (\r\n          <BoardSetting\r\n            board={board}\r\n            myRole={myRole}\r\n            deleteBoard={deleteBoard}\r\n          />\r\n        ) : (\r\n          \"-\"\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n});\r\n\r\nfunction NewList({ id, setLoading, setModal }) {\r\n  const [title, setTitle] = useState(\"\");\r\n\r\n  const submitNewList = async () => {\r\n    try {\r\n      if (!title.trim()) return;\r\n      setLoading(true);\r\n      boardApi.newList({ id, title });\r\n      setTitle(\"\");\r\n      setLoading(false);\r\n      setModal(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          submitNewList();\r\n        }}\r\n      >\r\n        <div>\r\n          <input\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            className=\"fw\"\r\n            type=\"text\"\r\n            placeholder=\"List Name\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <button className=\"fw\">Submit</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction NewItem({ selectedList, selectedListName, id, setLoading, setModal }) {\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const submitNewItem = async (i = 0) => {\r\n    try {\r\n      if (!name.trim()) return;\r\n      setLoading(true);\r\n      await boardApi.newItem({\r\n        id,\r\n        selectedList,\r\n        selectedListName,\r\n        name,\r\n      });\r\n\r\n      setName(\"\");\r\n      setModal(false);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          submitNewItem();\r\n        }}\r\n      >\r\n        <div>\r\n          <input\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"fw\"\r\n            type=\"text\"\r\n            placeholder=\"Item Name\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <button className=\"fw\">Submit</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Member({ id, board, setLoading }) {\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  return (\r\n    <ul>\r\n      {board.team.map((member, i) => (\r\n        <li key={i}>{member.name}</li>\r\n      ))}\r\n      <li>\r\n        <form\r\n          onSubmit={async (e) => {\r\n            e.preventDefault();\r\n            if (email.trim()) {\r\n              setLoading(true);\r\n              try {\r\n                await boardApi.updateBoard({\r\n                  action: \"add-member\",\r\n                  id,\r\n                  data: email,\r\n                });\r\n              } catch (error) {\r\n                console.log(error);\r\n              }\r\n              setLoading(false);\r\n            }\r\n            setEmail(\"\");\r\n          }}\r\n        >\r\n          <div className=\"fw\">\r\n            <input\r\n              className=\"fw\"\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          </div>\r\n          <button className=\"fw\">Add</button>\r\n        </form>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nfunction MemberSetting({\r\n  id,\r\n  member,\r\n  myRole,\r\n  logs,\r\n  formatDate,\r\n  getLogText,\r\n  updateBoard,\r\n}) {\r\n  const [role, setRole] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setRole(member.role);\r\n  }, [member]);\r\n\r\n  const updateRole = async () => {\r\n    try {\r\n      await boardApi.setBoardRole({ id, user: member, role });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const user = useUser();\r\n\r\n  return (\r\n    <>\r\n      <h4>{member.email}</h4>\r\n      <div>\r\n        <p>Role : {member.role}</p>\r\n        {member.role !== \"owner\" && myRole === \"owner\" ? (\r\n          <div>\r\n            <ul>\r\n              <li>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"role\"\r\n                  checked={role === \"admin\"}\r\n                  onChange={() => {\r\n                    setRole(\"admin\");\r\n                  }}\r\n                />{\" \"}\r\n                admin\r\n              </li>\r\n              <li>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"role\"\r\n                  checked={role === \"member\"}\r\n                  onChange={() => {\r\n                    setRole(\"member\");\r\n                  }}\r\n                />{\" \"}\r\n                member\r\n              </li>\r\n            </ul>\r\n            {role !== member.role ? (\r\n              <button className=\"btn1\" onClick={() => updateRole()}>\r\n                Save\r\n              </button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div>\r\n        <p>Activity Log</p>\r\n        {logs.length === 0 ? (\r\n          \"-\"\r\n        ) : (\r\n          <div\r\n            style={{\r\n              border: \"1px solid gray\",\r\n              width: \"100%\",\r\n              height: 150,\r\n              overflow: \"auto\",\r\n            }}\r\n          >\r\n            <Log\r\n              logs={logs}\r\n              showUser={false}\r\n              formatDate={formatDate}\r\n              getLogText={getLogText}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      {member.role !== \"owner\" &&\r\n      user._id !== member._id &&\r\n      myRole !== \"member\" ? (\r\n        <div>\r\n          <button\r\n            className=\"btn1 bg-red fr mt2\"\r\n            onClick={() => {\r\n              if (window.confirm(`Keluarkan ${member.name}?`))\r\n                updateBoard(\"delete-member\", member);\r\n              else return false;\r\n            }}\r\n          >\r\n            Remove\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction BoardSetting({ board, myRole, deleteBoard }) {\r\n  const [name, setName] = useState(board.name);\r\n  const [desc, setDesc] = useState(board.desc);\r\n\r\n  const updateBoard = async (action = \"\") => {\r\n    try {\r\n      const data =\r\n        action === \"rename-board\"\r\n          ? name\r\n          : action === \"edit-board-desc\"\r\n          ? desc\r\n          : \"\";\r\n      if (data === \"\") return;\r\n      await boardApi.updateBoard({ id: board._id, action, data });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <p>Name</p>\r\n        <input\r\n          type=\"text\"\r\n          value={name}\r\n          readOnly={myRole !== \"owner\" && myRole !== \"admin\"}\r\n          className=\"fw\"\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <br />\r\n        {name !== board.name ? (\r\n          <button\r\n            className={\"btn1\"}\r\n            onClick={() => {\r\n              updateBoard(\"rename-board\");\r\n            }}\r\n          >\r\n            Save\r\n          </button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div>\r\n        <p>Desc</p>\r\n        <textarea\r\n          rows={4}\r\n          className=\"fw\"\r\n          defaultValue={desc}\r\n          readOnly={myRole !== \"owner\" && myRole !== \"admin\"}\r\n          onChange={(e) => {\r\n            setDesc(e.target.value);\r\n          }}\r\n        ></textarea>\r\n        <br />\r\n        {desc !== board.desc ? (\r\n          <button\r\n            className={\"btn1\"}\r\n            onClick={() => {\r\n              updateBoard(\"edit-board-desc\");\r\n            }}\r\n          >\r\n            Save\r\n          </button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div>\r\n        <p>Owner</p> {board.user.name} - {board.user.email}\r\n      </div>\r\n      <div>\r\n        <p>Admin ({board.team.filter((t) => t.role === \"admin\").length})</p>\r\n        {board.team\r\n          .filter((t) => t.role === \"admin\")\r\n          .map((a) => (\r\n            <span key={a._id}>\r\n              - {a.name} - {a.email} <br />\r\n            </span>\r\n          ))}\r\n      </div>\r\n      <div>\r\n        <p>Member ({board.team.filter((t) => t.role === \"member\").length})</p>\r\n        {board.team\r\n          .filter((t) => t.role === \"member\")\r\n          .map((a) => (\r\n            <span key={a._id}>\r\n              - {a.name} - {a.email} <br />\r\n            </span>\r\n          ))}\r\n      </div>\r\n      {}\r\n      <div>\r\n        <button\r\n          className=\"btn1 bg-red fr\"\r\n          onClick={() => {\r\n            if (!window.confirm(\"Hapus board?!\")) return false;\r\n            deleteBoard();\r\n          }}\r\n        >\r\n          Delete\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nexport default function NewBoard({ setModal, setBoards, addBoard, ErrMsg }) {\r\n  const [name, setName] = useState(\"\");\r\n  const [desc, setDesc] = useState(\"\");\r\n  const [err, setErr] = useState(null);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    if (!name.trim()) return;\r\n    try {\r\n      const { data } = await addBoard({ name, desc });\r\n      setBoards((prevBoards) => [{ _id: data._id, name, desc }, ...prevBoards]);\r\n      setModal(false);\r\n    } catch (error) {\r\n      if (error.response) setErr(error.response.data);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ErrMsg error={err} />\r\n      <form onSubmit={(e) => submit(e)}>\r\n        <div className=\"mb1\">\r\n          <input\r\n            className=\"fw\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Board name\"\r\n          />\r\n        </div>\r\n        <div className=\"mb1\">\r\n          <textarea\r\n            placeholder=\"description\"\r\n            className=\"fw\"\r\n            rows=\"5\"\r\n            value={desc}\r\n            onChange={(e) => setDesc(e.target.value)}\r\n          ></textarea>\r\n        </div>\r\n        <div className=\"mb1\">\r\n          <button className=\"fw\">SUBMIT</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ({ boards, history }) {\r\n  const Board = ({ board }) => (\r\n    <li\r\n      onClick={() => {\r\n        history.push(`/board/${board._id}`);\r\n      }}\r\n    >\r\n      <h4>{board.name}</h4>\r\n      <hr />\r\n      <p>{board.desc}</p>\r\n    </li>\r\n  );\r\n\r\n  const Boards = () =>\r\n    boards.map((board) => <Board key={board._id} board={board} />);\r\n\r\n  return (\r\n    <ul className=\"boards\">\r\n      <Boards />\r\n    </ul>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { loadBoards, addBoard } from \"../../api/board\";\r\nimport useUser from \"../../context/hooks/useUser\";\r\nimport { io } from \"../../sio\";\r\n\r\n// components\r\nimport Modal from \"../Modal\";\r\nimport ErrMsg from \"../ErrMsg\";\r\nimport NewBoard from \"./NewBoard\";\r\nimport BoardList from \"./BoardList\";\r\n\r\nexport default React.memo(({ addToast }) => {\r\n  const [boards, setBoards] = useState([]);\r\n  const [err, setErr] = useState(null);\r\n  const [modal, setModal] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  const { user, reloadBoardRoles } = useUser();\r\n\r\n  // socketio events\r\n  useEffect(() => {\r\n    if (io) {\r\n      io.on(\"add-member\", async (data) => {\r\n        addToast(`Ditambahkan menjadi member board \"${data.name}\"`);\r\n        setBoards((prevBoards) => [data, ...prevBoards]);\r\n        reloadBoardRoles();\r\n      });\r\n      io.on(\"new-roles\", (data) => {\r\n        reloadBoardRoles();\r\n      });\r\n      io.on(\"delete-board\", (data) => {\r\n        setBoards((prevBoards) => prevBoards.filter((b) => b._id !== data));\r\n      });\r\n      return () => {\r\n        io.off(\"add-member\");\r\n        io.off(\"delete-board\");\r\n        io.off(\"new-roles\");\r\n      };\r\n    }\r\n  }, [addToast, reloadBoardRoles]);\r\n\r\n  useEffect(() => {\r\n    if (!user._id) return;\r\n    getBoards();\r\n  }, [user._id]);\r\n\r\n  // get boards\r\n  const getBoards = async () => {\r\n    try {\r\n      const { data } = await loadBoards();\r\n      setBoards(data);\r\n    } catch (error) {\r\n      setErr(error.response && error.response.data);\r\n    }\r\n  };\r\n\r\n  const Title = () => (\r\n    <h3 style={{ color: \"white\", padding: \"10px 5px\" }}>\r\n      My Boards{\" \"}\r\n      <button className=\"btn1\" onClick={() => setModal(!modal)}>\r\n        + New Board\r\n      </button>\r\n    </h3>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Title />\r\n      <ErrMsg error={err} />\r\n      <BoardList boards={boards} history={history} />\r\n      <Modal title=\"New Board\" visible={modal} setVisible={setModal}>\r\n        <NewBoard\r\n          setModal={setModal}\r\n          setBoards={setBoards}\r\n          addBoard={addBoard}\r\n          ErrMsg={ErrMsg}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport \"./Toast.css\";\r\n\r\nexport default function ({ data, delToast }) {\r\n  return (\r\n    <div id=\"snackbar\">\r\n      {data.map((d, i) => (\r\n        <div\r\n          key={d.id}\r\n          className=\"snackbar-item\"\r\n          style={{ opacity: 1 - (data.length - (i + 1)) / 5 }}\r\n        >\r\n          {d.text}\r\n          <button className=\"btn2 fr bg-red\" onClick={() => delToast(d.id)}>\r\n            x\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n\r\nimport useUser from \"./context/hooks/useUser\";\r\n\r\nimport \"./App.css\";\r\n\r\nimport Header from \"./components/Header\";\r\nimport Login from \"./components/auth/Login\";\r\nimport Register from \"./components/auth/Register\";\r\nimport Kanban from \"./components/kanban\";\r\nimport Boards from \"./components/boards\";\r\n\r\nimport Toast from \"./components/toast\";\r\n\r\nimport { io, connect, disconnect } from \"./sio\";\r\n\r\nfunction App() {\r\n  const { user, useSetUser, savedUser } = useUser();\r\n  const [toast, setToast] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!user._id) return;\r\n    if (io) disconnect();\r\n    connect();\r\n    io.on(\"test\", (t) => console.log(t));\r\n    io.on(\"reload\", () => window.location.reload());\r\n  }, [user._id]);\r\n\r\n  useSetUser();\r\n\r\n  // protected route\r\n  // const Protected = ({ path, children, ...rest }) => {\r\n  //   const loggedInUser = user._id ? user : savedUser;\r\n  //   if (!loggedInUser) return <Redirect to=\"/login\" />;\r\n  //   return (\r\n  //     <Route path={path} {...rest}>\r\n  //       {children}\r\n  //     </Route>\r\n  //   );\r\n  // };\r\n  //\r\n  const ProtectedV2 = () => {\r\n    const loggedInUser = user._id ? user : savedUser;\r\n    if (!loggedInUser) return <Redirect to=\"/login\" />;\r\n    else return null;\r\n  };\r\n\r\n  const addToast = (text = \"asfsa\") =>\r\n    setToast((prev) => {\r\n      const id = Math.random();\r\n      setTimeout(() => delToast(id), 5000);\r\n      return [...(prev.length < 5 ? prev : prev.slice(1)), { id, text }];\r\n    });\r\n\r\n  const delToast = (id) =>\r\n    setToast((prev) => [...prev.filter((t) => t.id !== id)]);\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Header />        \r\n          <Switch>\r\n            <Route exact={true} path=\"/login\">\r\n              <Login />\r\n            </Route>\r\n            <Route exact={true} path=\"/register\">\r\n              <Register />\r\n            </Route>\r\n            <Route path=\"/board/:id\">\r\n              <ProtectedV2 />\r\n              <Kanban addToast={addToast} />\r\n            </Route>\r\n            <Route exact={true} path=\"/\">\r\n              <ProtectedV2 />\r\n              <Boards addToast={addToast} />\r\n            </Route>\r\n            <Route path=\"*\">\r\n              <h1>Not Found</h1>\r\n            </Route>\r\n          </Switch>         \r\n        <Toast data={toast} delToast={delToast} />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React, { cloneElement } from \"react\";\r\nimport { User } from \"./user\";\r\n\r\nconst providers = [<User.Provider />];\r\n\r\nconst Store = ({ children: initial }) =>\r\n  providers.reduce(\r\n    (children, parent) => cloneElement(parent, { children }),\r\n    initial\r\n  );\r\n\r\nexport { Store, User };","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport { Store } from \"./context\";\r\n\r\nReactDOM.render(\r\n  <Store>\r\n    <App />\r\n  </Store>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}