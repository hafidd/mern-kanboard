/*! For license information please see main.352d8193.chunk.js.LICENSE.txt */
(this["webpackJsonpmern-kanboard"]=this["webpackJsonpmern-kanboard"]||[]).push([[0],{112:function(e,t,n){e.exports=n(235)},117:function(e,t,n){},134:function(e,t,n){},139:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},228:function(e,t){},234:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(25),c=n.n(o),i=(n(117),n(9)),l=n(5),u=n(11),s=n(23),m=n(7),d=n(8),f=a.a.createContext(),p=a.a.createContext(),h={_id:null,name:null,email:null,boardRoles:[],loading:!1,err:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_USER":return Object(m.a)(Object(m.a)({},e),{},{loading:!0,err:null});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return Object(m.a)(Object(m.a)({},t.payload),{},{loading:!1,err:null});case"ROLE_UPDATED":return Object(m.a)(Object(m.a)({},e),{},{boardRoles:t.payload,loading:!1,err:null});case"LOGIN_ERROR":case"REGISTER_ERROR":return Object(m.a)(Object(m.a)({},e),{},{loading:!1,err:t.payload});case"CLEAR_ERR":return Object(m.a)(Object(m.a)({},e),{},{err:null});case"LOGOUT_SUCCESS":return console.log("logout..."),h;default:return e}},b={State:f,Dispatch:p,Provider:function(e){var t=e.children,n=a.a.useReducer(v,h),r=Object(l.a)(n,2),o=r[0],c=r[1];return a.a.createElement(f.Provider,{value:o},a.a.createElement(p.Provider,{value:c},t))}},g=n(12),y=n.n(g);function E(){E=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(N){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return L()}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var i=w(c,n);if(i){if(i===s)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var s={};function m(){}function d(){}function f(){}var p={};i(p,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,a)&&(p=v);var b=f.prototype=m.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function c(){return new t((function(r,c){!function r(a,o,c,i){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,m=s.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,c,i)}),(function(e){r("throw",e,c,i)})):t.resolve(m).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,i)}))}i(l.arg)}(a,o,r,c)}))}return r=r?r.then(c,c):c()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=f,i(b,"constructor",f),i(f,"constructor",d),d.displayName=i(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var c=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},g(b),i(b,c,"Generator"),i(b,a,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return c.type="throw",c.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}var w=function(){var e=Object(r.useContext)(b.State),t=Object(r.useContext)(b.Dispatch),n=function(){var e=Object(d.a)(E().mark((function e(n,r){var a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_USER"}),e.next=4,o={email:n,password:r},y.a.post("/api/auth/login",o);case 4:a=e.sent,localStorage.setItem("user",JSON.stringify(a.data)),t({type:"LOGIN_SUCCESS",payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&t({type:"LOGIN_ERROR",payload:e.t0.response.data});case 12:case"end":return e.stop()}var o}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(d.a)(E().mark((function e(n,r,a){var o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING"}),e.next=4,c={name:n,email:r,password:a},y.a.post("/api/auth/register",c);case 4:o=e.sent,localStorage.setItem("user",JSON.stringify(o.data)),t({type:"REGISTER_SUCCESS",payload:o.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&t({type:"REGISTER_ERROR",payload:e.t0.response.data});case 12:case"end":return e.stop()}var c}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),o=function(){var e=Object(d.a)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("/api/auth/logout");case 3:localStorage.removeItem("user"),t({type:"LOGOUT_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var n=Object(d.a)(E().mark((function n(){var r,a;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.put("/api/auth/update-boardRoles");case 3:r=n.sent,a=Object(m.a)(Object(m.a)({},e),{},{boardRoles:r}),localStorage.setItem("user",JSON.stringify(a)),console.log("boardRoles updated",r),t({type:"ROLE_UPDATED",payload:r}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),o();case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}(),i=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null;return{user:e,login:n,register:a,logout:o,clearErr:function(){return t({type:"CLEAR_ERR"})},useClearErr:function(){Object(r.useEffect)((function(){t({type:"CLEAR_ERR"})}),[])},savedUser:i,useSetUser:function(){Object(r.useEffect)((function(){Object(d.a)(E().mark((function e(){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_USER"}),e.next=4,y.a.get("/api/auth/user-data");case 4:n=e.sent,localStorage.setItem("user",JSON.stringify(n.data)),t({type:"LOGIN_SUCCESS",payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i&&(localStorage.removeItem("user"),t({type:"LOGOUT_SUCCESS"}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[])},reloadBoardRoles:c}},O=(n(134),function(){var e=w(),t=e.user,n=e.logout,r=Object(u.g)();return a.a.createElement("div",{className:"header"},a.a.createElement("h4",{onClick:function(){return r.push("/")},style:{color:"white",cursor:"pointer"}},"Kanban Board"," ",a.a.createElement("p",{style:{fontSize:"7pt",margin:0}},"MERN +socket.io")),a.a.createElement("div",{className:"header-menu-left",style:{padding:"0 10px"}}),a.a.createElement("div",{className:"header-menu-right"},a.a.createElement("button",{className:"btn1"},t._id?t.name:"Guest"),t._id&&a.a.createElement("button",{style:{marginLeft:2},className:"btn1",onClick:function(){return n()}},"Logout")))}),x=function(e){var t=e.msg,n=void 0===t||t,r=e.error;return r?a.a.createElement("div",{className:"error-msg"},n?r.msg?a.a.createElement("p",null,r.msg):"Err":"",a.a.createElement("ul",null,r.errors&&r.errors.map((function(e,t){return a.a.createElement("li",{key:t},e)})))):null},j=(n(139),function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),i=Object(l.a)(c,2),m=i[0],d=i[1],f=w(),p=f.user,h=f.login;return(0,f.useClearErr)(),p._id?a.a.createElement(u.a,{to:"/"}):a.a.createElement("div",{className:"auth"},a.a.createElement("h2",null,"Login"),a.a.createElement(x,{error:p.err}),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(n,m)}},a.a.createElement("input",{type:"text",placeholder:"email",value:n,onChange:function(e){return o(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("input",{type:"password",placeholder:"password",value:m,onChange:function(e){return d(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("button",{className:"btn1"},"Login"),a.a.createElement(s.b,{to:"/register",href:""},"Register")))}),k=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),i=Object(l.a)(c,2),m=i[0],d=i[1],f=Object(r.useState)(""),p=Object(l.a)(f,2),h=p[0],v=p[1],b=Object(r.useState)(""),g=Object(l.a)(b,2),y=g[0],E=g[1],O=w(),j=O.user,k=O.register;if((0,O.useClearErr)(),j._id)return a.a.createElement(u.a,{to:"/"});return a.a.createElement("div",{className:"auth"},a.a.createElement("h2",null,"Register"),a.a.createElement(x,{msg:!1,error:j.err}),a.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),h===y&&k(n,m,h)}(e)}},a.a.createElement("input",{type:"text",placeholder:"nama",value:n,onChange:function(e){return o(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("input",{type:"text",placeholder:"email",value:m,onChange:function(e){return d(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("input",{type:"password",placeholder:"password",value:h,onChange:function(e){return v(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("input",{type:"password",placeholder:"konfirmasi password",value:y,onChange:function(e){return E(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("button",{className:"btn1"},"Register"),a.a.createElement(s.b,{to:"/login"},"Login")))},L=n(33),N=n(73),_=function(e){return"#"===e.slice(0,1)&&(e=e.slice(1)),3===e.length&&(e=e.split("").map((function(e){return e+e})).join("")),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"},S=function(e){return y.a.post("/api/boards",e)},C=function(e){return y.a.put("/api/board",e)},I=function(e){return y.a.get("/api/board/"+e)},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y.a.get("/api/board/".concat(e,"/log/").concat(null!==t?t:""))},D=function(e){return y.a.post("/api/board/items",e)},G=function(e){return y.a.put("/api/board/items",e)},T=(n(141),function(e){var t=e.title,n=void 0===t?"":t,r=e.visible,o=void 0===r||r,c=e.setVisible,i=void 0===c?null:c,l=e.closeModal,u=e.c,s=void 0===u?null:u,m=e.children;return console.log(),a.a.createElement("div",{className:"overlay ".concat(o&&"visible"," ").concat(s&&s)},a.a.createElement("div",{className:"modal"},a.a.createElement("div",{className:"modal-head"},a.a.createElement("span",{className:"modal-title"},n),a.a.createElement("button",{className:"modal-close",onClick:function(){l?l():i(!1)}},a.a.createElement("span",null,"\xd7"))),a.a.createElement("div",{className:"modal-body"},m)))}),F=n(107),P=n.n(F);n(142),n(143);function M(e){var t=e.logs,n=e.item,r=void 0===n?null:n,o=e.showUser,c=void 0===o||o,i=e.getLogText,l=e.formatDate;return a.a.createElement(a.a.Fragment,null,null!==r?a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Item : ",r.name),a.a.createElement("br",null)):"",t.map((function(e,n){return a.a.createElement("div",{key:e._id},a.a.createElement("small",null,l(new Date(e.date)))," ",a.a.createElement("br",null),a.a.createElement("p",null,c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("b",null,e.user.name)," "),i({dt:e,item:r})),t.length>n+1?a.a.createElement("hr",null):"")})))}var A=function(e){var t=e.item,n=e.updateItem,o=e.formatDate,c=e.getLogText,i=e.deleteItem,u=e.team,s=e.labels,m=e.logs,d=void 0===m?[]:m,f=Object(r.useState)(!1),p=Object(l.a)(f,2),h=p[0],v=p[1],b=Object(r.useState)(""),g=Object(l.a)(b,2),y=g[0],E=g[1],w=Object(r.useState)(null),O=Object(l.a)(w,2),x=O[0],j=O[1],k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E(e),j(t),v(!0)};return a.a.createElement("div",{className:"item-detail"},a.a.createElement(B,{itemName:t.name,rename:function(e){return n("rename-item",{old:t.name,new:e})}}),a.a.createElement("div",{className:"flex-wrap-1 mb1"},a.a.createElement("div",{className:"mr2"},a.a.createElement(J,{labels:t.labels,openModal:k})),a.a.createElement("div",{className:"mr2"},a.a.createElement(Y,{openModal:k,members:t.members})),a.a.createElement("div",null,a.a.createElement(H,{itemDd:t.dd,updateItem:n}))),a.a.createElement("div",{className:"mb1"},a.a.createElement(U,{submitDesc:function(e){return n("update-desc",e)},itemDesc:t.desc})),a.a.createElement("div",{className:"mb1"},a.a.createElement(V,{checkList:t.checkList,openModal:k,updateItem:n})),a.a.createElement("div",{className:"mb1"},a.a.createElement("button",{className:"btn1",onClick:function(){return k(t.name+" activity","log")}},"\u2630 Activity Log"),a.a.createElement("button",{className:"btn1 fr bg-red",onClick:function(){window.confirm("delete card ".concat(t.name,"?"))&&i(t._id)}},"Delete")),a.a.createElement(T,{title:y,visible:h,setVisible:v,c:"z999"},"labels"===x?a.a.createElement(W,{labels:t.labels,pLabels:s,submitNewLabel:function(e){return n("new-label",e)},deleteLabel:function(e){return n("delete-label",e)},fontColor:_}):"members"===x?a.a.createElement(z,{members:t.members,submitNewMember:function(e){return n("new-member",e)},team:u,updateItem:n}):"checklist"===x?a.a.createElement(K,{checkList:t.checkList,submitNewCheckList:function(e){return n("new-checklist",e)},deleteCheckList:function(e){return n("delete-checklist",e)}}):"log"===x?a.a.createElement(M,{item:t,logs:d,formatDate:o,getLogText:c}):""))};function B(e){var t=e.itemName,n=e.rename,o=Object(r.useState)(""),c=Object(l.a)(o,2),i=c[0],u=c[1];return Object(r.useEffect)((function(){return u(t)}),[]),a.a.createElement("div",null,a.a.createElement("p",{className:"bold"},"Name: "),a.a.createElement("input",{className:"fw",type:"text",defaultValue:t,onChange:function(e){return u(e.target.value)}}),i!==t&&a.a.createElement("button",{className:"btn2",onClick:function(){return n(i)}},"Save"))}function U(e){var t=e.itemDesc,n=e.submitDesc,o=Object(r.useState)(""),c=Object(l.a)(o,2),i=c[0],u=c[1];return Object(r.useEffect)((function(){return u(t)}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"bold"},"Description"),a.a.createElement("textarea",{className:"fw",rows:"5",defaultValue:t,onChange:function(e){return u(e.target.value)}}),i!==t&&a.a.createElement("button",{className:"btn2",onClick:function(){return n(i)}},"Save"))}function J(e){var t=e.labels,n=e.openModal;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"bold"},"Labels"),a.a.createElement("ul",null,t.map((function(e,t){return a.a.createElement("li",{key:t,className:"fl mr1 mb1 p1 font10 bold",style:{borderRadius:"2%",background:e.color||"white",color:_(e.color||"#fff")}},e.name)})),a.a.createElement("li",{className:"fl mr1 mb1"},a.a.createElement("button",{className:"btn2",onClick:function(){return n("Labels","labels",t)}},a.a.createElement("span",null," \u270e ")))))}function Y(e){var t=e.members,n=e.openModal;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"bold"},"Members"),a.a.createElement("ul",{className:""},t&&t.map((function(e,t){return a.a.createElement("li",{key:t+e._id,className:"fl mr1 mb1 p1 outline"},e.name)})),a.a.createElement("li",{className:"fl mr1 mb1 p1"},a.a.createElement("button",{className:"btn2",onClick:function(){return n("Members","members",t)}},a.a.createElement("span",null," \u270e ")))))}function V(e){var t=e.checkList,n=e.updateItem,r=e.openModal;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"bold"},"Checklist",t.length?a.a.createElement("span",null," (",t.reduce((function(e,t){return t.completed?e+1:e}),0),"/",t.length,")"):""),a.a.createElement("ul",null,t.map((function(e,t){return a.a.createElement("li",{key:t},a.a.createElement("input",{type:"checkbox",checked:e.completed,value:e._id,onChange:function(t){t.preventDefault(),n("update-checklist",{_id:e._id,name:e.name,completed:!e.completed})}})," ",e.name)})),a.a.createElement("li",null,a.a.createElement("button",{className:"btn2",onClick:function(){return r("Checklist","checklist",t)}},a.a.createElement("span",null," \u270e ")))))}function H(e){var t,n,o=e.itemDd,c=e.updateItem,i=Object(r.useState)(null),u=Object(l.a)(i,2),s=u[0],m=u[1];return Object(r.useEffect)((function(){return m(o?new Date(o):null)}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"bold"},"Due date"),a.a.createElement(P.a,{placeholderText:"\u270e",selected:s||(o?new Date(o):null),onChange:function(e){return m(e)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"d MMMM yyyy H:mm"}),(t=s,n=o?new Date(o):null,!(t===n||!(t>n||t<n))&&a.a.createElement("button",{className:"btn2",onClick:function(){return c("update-dd",s)}},"Save")))}function W(e){var t=e.labels,n=e.submitNewLabel,o=e.deleteLabel,c=e.pLabels,i=e.fontColor,u=Object(r.useState)(""),s=Object(l.a)(u,2),m=s[0],d=s[1],f=Object(r.useState)("#FFFFFF"),p=Object(l.a)(f,2),h=p[0],v=p[1],b=function(e){var t=e.color;return a.a.createElement("button",{type:"button",style:{padding:0,width:22,height:22,marginLeft:5,border:"none",background:t,cursor:"pointer"},onClick:function(){return v(t)}})};return a.a.createElement("ul",null,t.map((function(e,t){return a.a.createElement("li",{key:t,style:{background:e.color||"white",color:i(e.color||"#fff"),border:"1px solid black",padding:2,marginBottom:1}},e.name," ",a.a.createElement("button",{className:"btn2",type:"button",style:{float:"right"},onClick:function(){return o({_id:e._id,name:e.name})}},"x"))})),a.a.createElement("li",{style:{marginTop:4}},a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m.trim()&&n({name:m,color:h}),d("")}},a.a.createElement("div",{style:{background:"#f3f2f0",padding:4}},a.a.createElement("div",{className:"fw"},a.a.createElement("input",{className:"fw",type:"text",placeholder:"New label",value:m,onChange:function(e){return d(e.target.value)}}),a.a.createElement("input",{type:"color",style:{padding:0},value:h,onChange:function(e){return v(e.target.value)}}),["#ff0000","#00ff00","#0000ff","#ffff00"].map((function(e){return a.a.createElement(b,{key:e,color:e})}))),a.a.createElement("div",{style:{maxWidth:"300px",padding:"5px 0",textAlign:"center"}},c.map((function(e,t){return a.a.createElement("button",{key:t,type:"button",style:{background:e.color,color:i(e.color||"#fff"),border:"none",boxShadow:"0 1px 0 #091e4240",margin:"1px",padding:1,cursor:"pointer"},onClick:function(){d(e.name),v(e.color)}},e.name)}))),a.a.createElement("button",{className:"fw btn1"},"Add")))))}function z(e){var t=e.members,n=e.team,r=e.updateItem,o=t.map((function(e){return e._id}));return a.a.createElement("ul",null,n.map((function(e,t){return a.a.createElement("li",{key:t,className:"p1"},a.a.createElement("input",{type:"checkbox",name:e._id,value:e._id,checked:-1!==o.indexOf(e._id),onChange:function(t){console.log({_id:t.target.value,checked:t.target.checked}),r("update-members",{_id:t.target.value,name:e.name,checked:t.target.checked})}})," ",e.name)})),a.a.createElement("li",null))}function K(e){var t=e.checkList,n=e.submitNewCheckList,o=e.deleteCheckList,c=Object(r.useState)(""),i=Object(l.a)(c,2),u=i[0],s=i[1];return a.a.createElement("ul",null,t.length?t.map((function(e,t){return a.a.createElement("li",{key:t+e._id,style:{marginBottom:1}},a.a.createElement("button",{className:"btn1",onClick:function(){return o({_id:e._id,name:e.name})}},"x")," ",e.name)})):a.a.createElement("li",null,"Belum ada checklist"),a.a.createElement("li",null,a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.trim()&&n({name:u}),s("")}},a.a.createElement("div",{className:"fw"},a.a.createElement("input",{className:"fw",type:"text",placeholder:"New list",value:u,onChange:function(e){return s(e.target.value)}})),a.a.createElement("button",{className:"fw btn1"},"Add"))))}var $=n(110),q=n.n($),Q=null;function X(){X=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(L){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new x(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var i=E(c,n);if(i){if(i===s)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var s={};function m(){}function d(){}function f(){}var p={};i(p,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&n.call(v,a)&&(p=v);var b=f.prototype=m.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function c(){return new t((function(r,c){!function r(a,o,c,i){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,m=s.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,c,i)}),(function(e){r("throw",e,c,i)})):t.resolve(m).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,i)}))}i(l.arg)}(a,o,r,c)}))}return r=r?r.then(c,c):c()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=f,i(b,"constructor",f),i(f,"constructor",d),d.displayName=i(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var c=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},g(b),i(b,c,"Generator"),i(b,a,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return c.type="throw",c.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}var Z=a.a.memo((function(e){var t=e.addToast,n=Object(r.useState)({}),o=Object(l.a)(n,2),c=o[0],s=o[1],f=Object(r.useState)([]),p=Object(l.a)(f,2),h=p[0],v=p[1],b=Object(r.useState)(!1),g=Object(l.a)(b,2),E=g[0],O=g[1],x=Object(r.useState)(!1),j=Object(l.a)(x,2),k=j[0],S=j[1],F=Object(r.useState)(null),P=Object(l.a)(F,2),B=P[0],U=P[1],J=Object(r.useState)(null),Y=Object(l.a)(J,2),V=Y[0],H=Y[1],W=Object(r.useState)(null),z=Object(l.a)(W,2),K=z[0],$=z[1],q=Object(r.useState)(""),Z=Object(l.a)(q,2),oe=Z[0],ce=Z[1],ie=Object(r.useState)(null),le=Object(l.a)(ie,2),ue=le[0],se=le[1],me=Object(r.useState)([]),de=Object(l.a)(me,2),fe=de[0],pe=de[1],he=Object(r.useState)(null),ve=Object(l.a)(he,2),be=ve[0],ge=ve[1],ye=Object(r.useState)({open:!1,name:""}),Ee=Object(l.a)(ye,2),we=Ee[0],Oe=Ee[1],xe=Object(r.useState)(""),je=Object(l.a)(xe,2),ke=je[0],Le=je[1],Ne=Object(u.h)().id,_e=Object(u.g)(),Se=w(),Ce=Se.user,Ie=Se.reloadBoardRoles,Re=Object(r.useCallback)(Object(d.a)(X().mark((function e(){var t,n,r,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),t=!1,e.prev=2,e.next=5,I(Ne);case 5:return n=e.sent,r=n.data,t=!0,v(r.lists),delete r.lists,s(Object(m.a)(Object(m.a)({},r),{},{team:[Object(m.a)(Object(m.a)({},r.user),{},{role:"owner"})].concat(Object(i.a)(r.team))})),e.next=13,R(Ne);case 13:a=e.sent,pe(a.data),O(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),t||_e.push("/");case 21:case"end":return e.stop()}}),e,null,[[2,18]])}))),[Ne,_e]);Object(r.useEffect)((function(){if(Q){var e=function(e){return console.log(Te({dt:e})),e.user._id!==Ce._id?e.user.name+" "+Te({dt:e}):""+Te({dt:e})};Q.emit("join",Ne),Q.on("server-reload",(function(){Q.emit("join",Ne)})),Q.on("new-list",(function(n){v((function(e){return[].concat(Object(i.a)(e),[n.newList])})),pe((function(e){return[n.newLog].concat(Object(i.a)(e))})),t(e(n.newLog))})),Q.on("new-item",(function(n){v((function(e){return Object(N.cloneDeep)(e).map((function(e){return e._id===n.newLog.list._id&&e.items.push(n.newItem),e}))})),pe((function(e){return[n.newLog].concat(Object(i.a)(e))})),t(e(n.newLog))})),Q.on("reorder",(function(n){v((function(e){return De(e,n.data)})),pe((function(e){return[n.log].concat(Object(i.a)(e))})),t(e(n.log))})),Q.on("update-item",(function(n){v((function(e){return Object(N.cloneDeep)(e).map((function(e){return e._id===n.log.list._id&&(e.items=e.items.map((function(e){return e._id===n.log.item._id&&("new-label"===n.log.action?e.labels.push(n.update):"delete-label"===n.log.action?e.labels=e.labels.filter((function(e){return e._id!==n.update._id})):"update-desc"===n.log.action?e.desc=n.update:"update-dd"===n.log.action?e.dd=n.update:"rename-item"===n.log.action?e.name=n.update.new:"new-checklist"===n.log.action?e.checkList.push(n.update):"update-checklist"===n.log.action?e.checkList=e.checkList.map((function(e){return e._id===n.update._id&&(e.completed=n.update.completed),e})):"delete-checklist"===n.log.action?e.checkList=e.checkList.filter((function(e){return e._id!==n.update._id})):"update-members"===n.log.action&&(n.update.checked?e.members.push(n.update.user):e.members=e.members.filter((function(e){return e._id!==n.update._id}))),se((function(t){return null!==t&&t._id===e._id?e:t}))),e}))),e}))})),pe((function(e){return[n.log].concat(Object(i.a)(e))})),t(e(n.log))})),Q.on("add-member",function(){var n=Object(d.a)(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.newLog){n.next=2;break}return n.abrupt("return",Ie());case 2:s((function(e){return Object(m.a)(Object(m.a)({},e),{},{team:[].concat(Object(i.a)(e.team),[r.user])})})),pe((function(e){return[r.newLog].concat(Object(i.a)(e))})),t(e(r.newLog));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Q.on("delete-member",function(){var n=Object(d.a)(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.user._id.toString()!==Ce._id.toString()){n.next=2;break}return n.abrupt("return",_e.push("/"));case 2:s((function(e){return Object(m.a)(Object(m.a)({},e),{},{team:e.team.filter((function(e){return e._id.toString()!==r.user._id.toString()}))})})),pe((function(e){return[r.newLog].concat(Object(i.a)(e))})),Ve(),ge(null),t(e(r.newLog));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Q.on("update-role",function(){var n=Object(d.a)(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s((function(e){return Object(m.a)(Object(m.a)({},e),{},{team:e.team.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{role:e._id===r.update.user._id?r.update.role:e.role})}))})})),pe((function(e){return[r.log].concat(Object(i.a)(e))})),ge((function(e){return null!==e?Object(m.a)(Object(m.a)({},e),{},{role:e._id===r.update.user._id?r.update.role:e.role}):null})),t(e(r.log));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Q.on("rename-board",function(){var n=Object(d.a)(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s((function(e){return Object(m.a)(Object(m.a)({},e),{},{name:r.data})})),pe((function(e){return[r.newLog].concat(Object(i.a)(e))})),t(e(r.newLog));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Q.on("edit-board-desc",function(){var n=Object(d.a)(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s((function(e){return Object(m.a)(Object(m.a)({},e),{},{desc:r.data})})),pe((function(e){return[r.newLog].concat(Object(i.a)(e))})),t(e(r.newLog));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Q.on("delete-item",(function(n){if(0===n.update.ok)return!1;v((function(e){return e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{items:e._id===n.listId?e.items.filter((function(e){return e._id!==n.itemId})):e.items})}))})),Ve(),pe((function(e){return[n.newLog].concat(Object(i.a)(e))})),t(e(n.newLog))})),Q.on("delete-list",(function(n){if(0===n.update.ok)return!1;v((function(e){return e.filter((function(e){return e._id!==n.listId}))})),pe((function(e){return[n.newLog].concat(Object(i.a)(e))})),t(e(n.newLog))})),Q.on("delete-board",(function(e){Ne===e&&_e.push("/")})),Q.on("new-roles",(function(){return Ie()}))}return function(){Q&&(["new-item","new-list","reorder","update-item","delete-member","update-role","new-roles","server-reload"].forEach((function(e){return Q.off(e)})),Q.emit("leave",Ne))}}),[Q]),Object(r.useEffect)((function(){if(c.team){var e=c.team.find((function(e){return e._id===Ce._id})).role;e!==ke&&Le(e)}}),[c.team]),Object(r.useEffect)((function(){Ce._id&&Re()}),[Ce._id,Re]),Object(r.useEffect)((function(){"detail"===V&&U(ue.name)}),[ue,V]);var De=function(e,t){var n=t.source,r=t.destination,a=t.type,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o){var c=[r,n];n=c[0],r=c[1]}if("item"===a){var u=JSON.parse(JSON.stringify(e)),s=u.find((function(e){return e._id===n.droppableId})).items.splice(n.index,1),m=Object(l.a)(s,1),d=m[0];return!!d&&u.map((function(e){return e._id===r.droppableId&&e.items.splice(r.index,0,d),e}))}var f=Object(i.a)(e),p=f.splice(n.index,1),h=Object(l.a)(p,1),v=h[0];return f.splice(r.index,0,v),f},Ge=function(){var e=Object(d.a)(X().mark((function e(t){var n,r,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.source,r=t.destination,a=t.type,r&&(n.droppableId!==r.droppableId||n.index!==r.index)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,O(!0),e.next=7,o={id:Ne,source:n,destination:r,type:a},y.a.put("/api/board/reorder",o);case 7:O(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Re();case 13:case"end":return e.stop()}var o}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(e){var t=e.dt,n=e.item,r=void 0===n?ue:n;return"new-label"===t.action?"menambah label '".concat(t.data,"'\n        ").concat(null===r?'ke item "'.concat(t.item.name,'"'):""):"delete-label"===t.action?"menghapus label '".concat(t.data,"' \n        ").concat(null===r?'di item "'.concat(t.item.name,'"'):""):"update-desc"===t.action?"mengubah deskripsi : '".concat(t.data.slice(0,15),"' \n        ").concat(t.data.length>15?"....":"","\n        ").concat(null===r?'pada item "'.concat(t.item.name,'"'):""):"update-dd"===t.action?"".concat(null===t.data?"menghapus":"mengubah"," tanggal \n        ").concat(null===t.data?"":"'".concat(Be(new Date(t.data)),"'")," ").concat(null===r?'pada item "'.concat(t.item.name,'"'):""):"new-checklist"===t.action?"menambah checklist '".concat(t.data,"' \n        ").concat(null===r?'ke item "'.concat(t.item.name,'"'):""):"delete-checklist"===t.action?"menghapus checklist '".concat(t.data,"' \n        ").concat(null===r?'pada item "'.concat(t.item.name,'"'):""):"update-checklist"===t.action?"mengubah checklist ".concat(t.data.completed?"\u2713":""," \n        '").concat(t.data.name,"'\n        ").concat(null===r?'pada item "'.concat(t.item.name,'"'):""):"update-members"===t.action?"".concat(t.data.checked?"menambah":"menghapus"," \n        member '").concat(t.data.name,"' \n        ").concat(null===r?'pada item "'.concat(t.item.name,'"'):""):"new-board"===t.action?'membuat board "'.concat(t.data,'"'):"new-list"===t.action?'membuat list "'.concat(t.data,'"'):"new-item"===t.action?'menambahkan item "'.concat(t.data,'" ke list "').concat(t.list.name,'"'):"reorder-item"===t.action?'mengubah urutan item "'.concat(t.item.name,'" \n        ').concat(t.data.source.index+1,"\n        \u2192 ").concat(t.data.destination.index+1,' \n        pada list "').concat(t.list.name,'"'):"reorder-list"===t.action?'mengubah urutan list "'.concat(t.list.name,'" \n        ').concat(t.data.source.index+1,"\n        \u2192 ").concat(t.data.destination.index+1):"move-item"===t.action?'memindahkan item "'.concat(t.item.name,'"\n        dari "').concat(t.sourceList.name,'" \n        ke "').concat(t.destinationList.name,'"'):"new-boardMember"===t.action?'menambahkan member "'.concat(t.data.name,'"'):"delete-boardMember"===t.action?'mengeluarkan member "'.concat(t.data.name,'"'):"update-role"===t.action?'mengubah role "'.concat(t.data.user.name,'" ').concat(t.data.user.role," \u2192 ").concat(t.data.role):"delete-item"===t.action?'menghapus item "'.concat(t.item.name,'" pada list "').concat(t.list.name,'"'):"delete-list"===t.action?"menghapus list ".concat(t.list.name):"rename-board"===t.action?'mengubah nama board \u2192 "'.concat(t.data,'"'):"edit-board-desc"===t.action?'mengubah deskripsi board \u2192 "'.concat(t.data,'"'):"rename-item"===t.action?'mengubah nama item "'.concat(t.data.old||"",'" \u2192 "').concat(t.data.new||"",'"'):"-"},Fe=function(){var e=Object(d.a)(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,G({id:Ne,listId:K,itemId:ue._id,itemName:ue.name,action:t,data:n});case 4:O(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(d.a)(X().mark((function e(){var t,n=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:"",e.prev=1,t.trim()){e.next=4;break}return e.abrupt("return");case 4:return O(!0),e.next=7,D({id:Ne,selectedList:K,selectedListName:oe,name:t});case 7:Oe({open:!1,name:""}),$(null),O(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),O(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C({action:t,id:c._id,data:n});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("update board error",e.t0),Re();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(d.a)(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n={id:Ne,listId:K,itemId:t,listName:oe,itemName:ue.name},y.a.delete("/api/board/item",{data:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}var n}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Be=function(e){return"".concat(e.getDate()," ").concat(e.toLocaleString("id-ID",{month:"long"})," \n        ").concat(e.getFullYear()," - \n        ").concat(e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1}))},Ue=function(){var e=Object(d.a)(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={id:Ne,listId:t,listName:n},y.a.delete("/api/board/list",{data:r});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}var r}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),Je=function(){var e=Object(d.a)(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t={id:Ne},y.a.delete("/api/board/",{data:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}var t}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n&&se(n),U(e),H(t),S(!0)},Ve=function(){U(""),H(null),S(!1),se(null),ge(null)},He=h.reduce((function(e,t){return e.concat(t.items)}),[]).reduce((function(e,t){return e.concat(t.labels)}),[]).reduce((function(e,t){return void 0===e.find((function(e){return e.name===t.name&&e.color===t.color}))?e.concat({name:t.name,color:t.color}):e}),[]),We=function(){return a.a.createElement("div",{className:"board-list"},a.a.createElement("button",{className:"btn-a",onClick:function(){return Ye("New List","list")}},"+ New list"))},ze=function(){return a.a.createElement("div",{className:"board-menu flex-wrap-1"},a.a.createElement("h3",{style:{color:"white"},className:"mr2"},c.name),a.a.createElement("ul",{className:"",style:{display:"flex",flexWrap:"wrap",flex:1,minWidth:200}},c.team&&c.team.map((function(e){return a.a.createElement("li",{key:e._id,className:"mr1 p1",style:{background:"white"},onClick:function(){ge(e),Ye(e.name,"member-detail")}},e.name)})),a.a.createElement("li",null,"admin"===ke||"owner"===ke?a.a.createElement("button",{className:"fh btn1",onClick:function(){return Ye("Add member","member")}},"+"):"")),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("button",{className:"btn1",onClick:function(){return Ye("Settings","settings")}},"\u2699"),a.a.createElement("button",{className:"btn1 ml1",onClick:function(){return Ye("Activity log","log")}},"Activity")))},Ke=function(e){var t=e.d,n=e.i;return a.a.createElement(L.b,{isDragDisabled:E,type:"list",draggableId:t._id,index:n},(function(e,n){return a.a.createElement("div",Object.assign({className:"board-list ".concat(n.isDragging?"dragging":"")},e.draggableProps,{ref:e.innerRef}),a.a.createElement("div",Object.assign({},e.dragHandleProps,{className:"list-header"}),a.a.createElement("strong",null,t.title),a.a.createElement("button",{className:"btn-a bg-red fr",onClick:function(){if(!window.confirm("hapus list ".concat(t.title,"?")))return!1;Ue(t._id,t.title)}},a.a.createElement("span",{style:{color:"white"}},"x"))),a.a.createElement(L.c,{type:"item",droppableId:t._id},(function(e,n){return a.a.createElement("div",Object.assign({className:"list-content"},e.droppableProps,{ref:e.innerRef}),a.a.createElement("ul",null,t.items.map((function(e,n){return a.a.createElement($e,{d:t,list:e,i:n,key:e._id})})),we.open&&K===t._id&&a.a.createElement("div",{className:"mt2"},a.a.createElement("input",{type:"text",className:"fw",placeholder:"enter card name...",defaultValue:we.name,onChange:function(e){return Oe(Object(m.a)(Object(m.a)({},we),{},{name:e.target.value}))}}),a.a.createElement("button",{className:"btn2 bg-green",onClick:function(){return Pe(we.name)}},"Save"),a.a.createElement("button",{className:"btn2 ml1",onClick:function(){Oe({open:!1}),$(null)}},"Cancel")),we.open&&K===t._id?"":a.a.createElement("button",{className:"btn-a fw",onClick:function(){$(t._id),ce(t.title),Oe({open:!0})}},"+ New card")))})))}))},$e=function(e){var t=e.d,n=e.list,r=e.i;return a.a.createElement(L.b,{isDragDisabled:E,type:"item",key:n._id,draggableId:n._id,index:r},(function(e,r){return a.a.createElement("li",Object.assign({className:"item ".concat(r.isDragging?"dragging":"")},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,onClick:function(){$(t._id),ce(t.title),Ye(n.name,"detail",n)}}),a.a.createElement("p",{className:"bold font10"},n.name),a.a.createElement("div",{className:"mt2"},a.a.createElement("ul",{className:"flex-wrap-1"},n.labels&&n.labels.map((function(e,t){return a.a.createElement("li",{key:e._id+t,className:"mr1 mb1 p1 font8 bold",style:{borderRadius:"5%",background:e.color||"white",color:_(e.color||"#fff")}},e.name)})))),n.checkList.length?a.a.createElement("div",{className:"mt2 font10"},"Checklist"," ",n.checkList.reduce((function(e,t){return t.completed?e+1:e}),0),"/",n.checkList.length):"",n.members.length?a.a.createElement("div",{className:"mt2 font10"},a.a.createElement("ul",{className:"flex-wrap-1"},n.members.map((function(e){return a.a.createElement("li",{key:e._id},a.a.createElement("span",{role:"img","aria-label":"",className:"font12"},"m"===e.gender?"\ud83e\udddf\u200d\u2642\ufe0f":"f"===e.gender?"\ud83e\udddf\u200d\u2640\ufe0f":"\ud83d\udc7d"),a.a.createElement("span",null,e.name))})))):"",n.dd&&a.a.createElement("div",{className:"font8 mt2"},a.a.createElement("span",{role:"img","aria-label":""},"\ud83d\udd51")," ",new Date(n.dd).toLocaleString("id-ID")))}))};return a.a.createElement("div",{className:"board"},a.a.createElement(ze,null),a.a.createElement(L.a,{onDragEnd:function(e){return Ge(e)}},a.a.createElement(L.c,{type:"list",direction:"horizontal",droppableId:"content"},(function(e,t){return a.a.createElement("div",Object.assign({className:"board-content"},e.droppableProps,{ref:e.innerRef}),h.map((function(e,t){return a.a.createElement(Ke,{key:e._id,d:e,i:t})})),a.a.createElement(We,null))}))),a.a.createElement(T,{title:B,visible:k,setVisible:S,closeModal:Ve},"list"===V?a.a.createElement(ee,{id:Ne,setLoading:O,setModal:S}):"item"===V?a.a.createElement(te,{id:Ne,selectedList:K,selectedListName:oe,setLoading:O,setModal:S}):"detail"===V?a.a.createElement(A,{item:ue,updateItem:Fe,deleteItem:Ae,formatDate:Be,getLogText:Te,team:c.team,logs:fe.filter((function(e){return e.item&&e.item._id===ue._id})),labels:He}):"member"===V?a.a.createElement(ne,{id:Ne,board:c,setLoading:O,setBoard:s,setLogs:pe}):"member-detail"===V?a.a.createElement(re,{id:Ne,member:be,myRole:ke,formatDate:Be,getLogText:Te,updateBoard:Me,logs:fe.filter((function(e){return e.user._id===be._id}))}):"log"===V?a.a.createElement(M,{logs:fe,formatDate:Be,getLogText:Te}):"settings"===V?a.a.createElement(ae,{board:c,myRole:ke,deleteBoard:Je}):"-"))}));function ee(e){var t=e.id,n=e.setLoading,o=e.setModal,c=Object(r.useState)(""),i=Object(l.a)(c,2),u=i[0],s=i[1],m=function(){var e=Object(d.a)(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u.trim()){e.next=3;break}return e.abrupt("return");case 3:n(!0),r={id:t,title:u},y.a.post("/api/board/lists",r),s(""),n(!1),o(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),n(!1);case 14:case"end":return e.stop()}var r}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("form",{onClick:function(e){e.preventDefault(),m()}},a.a.createElement("div",null,a.a.createElement("input",{value:u,onChange:function(e){return s(e.target.value)},className:"fw",type:"text",placeholder:"List Name"})),a.a.createElement("div",null,a.a.createElement("button",{className:"fw"},"Submit"))))}function te(e){var t=e.selectedList,n=e.selectedListName,o=e.id,c=e.setLoading,i=e.setModal,u=Object(r.useState)(""),s=Object(l.a)(u,2),m=s[0],f=s[1],p=function(){var e=Object(d.a)(X().mark((function e(){var r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>0&&void 0!==r[0]?r[0]:0,e.prev=1,m.trim()){e.next=4;break}return e.abrupt("return");case 4:return c(!0),e.next=7,D({id:o,selectedList:t,selectedListName:n,name:m});case 7:f(""),i(!1),c(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),c(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("form",{onClick:function(e){e.preventDefault(),p()}},a.a.createElement("div",null,a.a.createElement("input",{value:m,onChange:function(e){return f(e.target.value)},className:"fw",type:"text",placeholder:"Item Name"})),a.a.createElement("div",null,a.a.createElement("button",{className:"fw"},"Submit"))))}function ne(e){var t=e.id,n=e.board,o=e.setLoading,c=Object(r.useState)(""),i=Object(l.a)(c,2),u=i[0],s=i[1];return a.a.createElement("ul",null,n.team.map((function(e,t){return a.a.createElement("li",{key:t},e.name)})),a.a.createElement("li",null,a.a.createElement("form",{onSubmit:function(){var e=Object(d.a)(X().mark((function e(n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!u.trim()){e.next=12;break}return o(!0),e.prev=3,e.next=6,C({action:"add-member",id:t,data:u});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:o(!1);case 12:s("");case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},a.a.createElement("div",{className:"fw"},a.a.createElement("input",{className:"fw",type:"email",placeholder:"Email",value:u,onChange:function(e){return s(e.target.value)}})),a.a.createElement("button",{className:"fw"},"Add"))))}function re(e){var t=e.id,n=e.member,o=e.myRole,c=e.logs,i=e.formatDate,u=e.getLogText,s=e.updateBoard,m=Object(r.useState)(""),f=Object(l.a)(m,2),p=f[0],h=f[1];Object(r.useEffect)((function(){h(n.role)}),[n]);var v=function(){var e=Object(d.a)(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={id:t,user:n,role:p},y.a.put("/api/board/set-role",r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}var r}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),b=w();return a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,n.email),a.a.createElement("div",null,a.a.createElement("p",null,"Role : ",n.role),"owner"!==n.role&&"owner"===o?a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("input",{type:"radio",name:"role",checked:"admin"===p,onChange:function(){h("admin")}})," ","admin"),a.a.createElement("li",null,a.a.createElement("input",{type:"radio",name:"role",checked:"member"===p,onChange:function(){h("member")}})," ","member")),p!==n.role?a.a.createElement("button",{className:"btn1",onClick:function(){return v()}},"Save"):""):""),a.a.createElement("div",null,a.a.createElement("p",null,"Activity Log"),0===c.length?"-":a.a.createElement("div",{style:{border:"1px solid gray",width:"100%",height:150,overflow:"auto"}},a.a.createElement(M,{logs:c,showUser:!1,formatDate:i,getLogText:u}))),"owner"!==n.role&&b._id!==n._id&&"member"!==o?a.a.createElement("div",null,a.a.createElement("button",{className:"btn1 bg-red fr mt2",onClick:function(){if(!window.confirm("Keluarkan ".concat(n.name,"?")))return!1;s("delete-member",n)}},"Remove")):"")}function ae(e){var t=e.board,n=e.myRole,o=e.deleteBoard,c=Object(r.useState)(t.name),i=Object(l.a)(c,2),u=i[0],s=i[1],m=Object(r.useState)(t.desc),f=Object(l.a)(m,2),p=f[0],h=f[1],v=function(){var e=Object(d.a)(X().mark((function e(){var n,r,a=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:"",e.prev=1,""!==(r="rename-board"===n?u:"edit-board-desc"===n?p:"")){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,C({id:t._id,action:n,data:r});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("p",null,"Name"),a.a.createElement("input",{type:"text",value:u,readOnly:"owner"!==n&&"admin"!==n,className:"fw",onChange:function(e){return s(e.target.value)}}),a.a.createElement("br",null),u!==t.name?a.a.createElement("button",{className:"btn1",onClick:function(){v("rename-board")}},"Save"):""),a.a.createElement("div",null,a.a.createElement("p",null,"Desc"),a.a.createElement("textarea",{rows:4,className:"fw",defaultValue:p,readOnly:"owner"!==n&&"admin"!==n,onChange:function(e){h(e.target.value)}}),a.a.createElement("br",null),p!==t.desc?a.a.createElement("button",{className:"btn1",onClick:function(){v("edit-board-desc")}},"Save"):""),a.a.createElement("div",null,a.a.createElement("p",null,"Owner")," ",t.user.name," - ",t.user.email),a.a.createElement("div",null,a.a.createElement("p",null,"Admin (",t.team.filter((function(e){return"admin"===e.role})).length,")"),t.team.filter((function(e){return"admin"===e.role})).map((function(e){return a.a.createElement("span",{key:e._id},"- ",e.name," - ",e.email," ",a.a.createElement("br",null))}))),a.a.createElement("div",null,a.a.createElement("p",null,"Member (",t.team.filter((function(e){return"member"===e.role})).length,")"),t.team.filter((function(e){return"member"===e.role})).map((function(e){return a.a.createElement("span",{key:e._id},"- ",e.name," - ",e.email," ",a.a.createElement("br",null))}))),a.a.createElement("div",null,a.a.createElement("button",{className:"btn1 bg-red fr",onClick:function(){if(!window.confirm("Hapus board?!"))return!1;o()}},"Delete")))}function oe(){oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(L){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new x(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var i=E(c,n);if(i){if(i===s)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var s={};function m(){}function d(){}function f(){}var p={};i(p,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&n.call(v,a)&&(p=v);var b=f.prototype=m.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function c(){return new t((function(r,c){!function r(a,o,c,i){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,m=s.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,c,i)}),(function(e){r("throw",e,c,i)})):t.resolve(m).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,i)}))}i(l.arg)}(a,o,r,c)}))}return r=r?r.then(c,c):c()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=f,i(b,"constructor",f),i(f,"constructor",d),d.displayName=i(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var c=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},g(b),i(b,c,"Generator"),i(b,a,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return c.type="throw",c.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ce(e){var t=e.setModal,n=e.setBoards,o=e.addBoard,c=e.ErrMsg,u=Object(r.useState)(""),s=Object(l.a)(u,2),m=s[0],f=s[1],p=Object(r.useState)(""),h=Object(l.a)(p,2),v=h[0],b=h[1],g=Object(r.useState)(null),y=Object(l.a)(g,2),E=y[0],w=y[1],O=function(){var e=Object(d.a)(oe().mark((function e(r){var a,c;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),m.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,o({name:m,desc:v});case 6:a=e.sent,c=a.data,n((function(e){return[{_id:c._id,name:m,desc:v}].concat(Object(i.a)(e))})),t(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response&&w(e.t0.response.data);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(c,{error:E}),a.a.createElement("form",{onSubmit:function(e){return O(e)}},a.a.createElement("div",{className:"mb1"},a.a.createElement("input",{className:"fw",value:m,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"Board name"})),a.a.createElement("div",{className:"mb1"},a.a.createElement("textarea",{placeholder:"description",className:"fw",rows:"5",value:v,onChange:function(e){return b(e.target.value)}})),a.a.createElement("div",{className:"mb1"},a.a.createElement("button",{className:"fw"},"SUBMIT"))))}var ie=function(e){var t=e.boards,n=e.history,r=function(e){var t=e.board;return a.a.createElement("li",{onClick:function(){n.push("/board/".concat(t._id))}},a.a.createElement("h4",null,t.name),a.a.createElement("hr",null),a.a.createElement("p",null,t.desc))},o=function(){return t.map((function(e){return a.a.createElement(r,{key:e._id,board:e})}))};return a.a.createElement("ul",{className:"boards"},a.a.createElement(o,null))};function le(){le=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(L){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new x(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var i=E(c,n);if(i){if(i===s)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var s={};function m(){}function d(){}function f(){}var p={};i(p,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&n.call(v,a)&&(p=v);var b=f.prototype=m.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function c(){return new t((function(r,c){!function r(a,o,c,i){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,m=s.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,c,i)}),(function(e){r("throw",e,c,i)})):t.resolve(m).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,i)}))}i(l.arg)}(a,o,r,c)}))}return r=r?r.then(c,c):c()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=f,i(b,"constructor",f),i(f,"constructor",d),d.displayName=i(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var c=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},g(b),i(b,c,"Generator"),i(b,a,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return c.type="throw",c.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}var ue=a.a.memo((function(e){var t=e.addToast,n=Object(r.useState)([]),o=Object(l.a)(n,2),c=o[0],s=o[1],m=Object(r.useState)(null),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(r.useState)(!1),b=Object(l.a)(v,2),g=b[0],E=b[1],O=Object(u.g)(),j=w(),k=j.user,L=j.reloadBoardRoles;Object(r.useEffect)((function(){if(Q)return Q.on("add-member",function(){var e=Object(d.a)(le().mark((function e(n){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t('Ditambahkan menjadi member board "'.concat(n.name,'"')),s((function(e){return[n].concat(Object(i.a)(e))})),L();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q.on("new-roles",(function(e){L()})),Q.on("delete-board",(function(e){s((function(t){return t.filter((function(t){return t._id!==e}))}))})),function(){Q.off("add-member"),Q.off("delete-board"),Q.off("new-roles")}}),[t,L]),Object(r.useEffect)((function(){k._id&&N()}),[k._id]);var N=function(){var e=Object(d.a)(le().mark((function e(){var t,n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/boards");case 3:t=e.sent,n=t.data,s(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(e.t0.response&&e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=function(){return a.a.createElement("h3",{style:{color:"white",padding:"10px 5px"}},"My Boards"," ",a.a.createElement("button",{className:"btn1",onClick:function(){return E(!g)}},"+ New Board"))};return a.a.createElement(a.a.Fragment,null,a.a.createElement(_,null),a.a.createElement(x,{error:p}),a.a.createElement(ie,{boards:c,history:O}),a.a.createElement(T,{title:"New Board",visible:g,setVisible:E},a.a.createElement(ce,{setModal:E,setBoards:s,addBoard:S,ErrMsg:x})))})),se=(n(234),function(e){var t=e.data,n=e.delToast;return a.a.createElement("div",{id:"snackbar"},t.map((function(e,r){return a.a.createElement("div",{key:e.id,className:"snackbar-item",style:{opacity:1-(t.length-(r+1))/5}},e.text,a.a.createElement("button",{className:"btn2 fr bg-red",onClick:function(){return n(e.id)}},"x"))})))});var me=function(){var e=w(),t=e.user,n=e.useSetUser,o=e.savedUser,c=Object(r.useState)([]),m=Object(l.a)(c,2),d=m[0],f=m[1];Object(r.useEffect)((function(){t._id&&(Q&&Q.close(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Q=q.a.connect("/?board=".concat(e))}(),Q.on("test",(function(e){return console.log(e)})),Q.on("reload",(function(){return window.location.reload()})))}),[t._id]),n();var p=function(){return(t._id?t:o)?null:a.a.createElement(u.a,{to:"/login"})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asfsa";return f((function(t){var n=Math.random();return setTimeout((function(){return v(n)}),5e3),[].concat(Object(i.a)(t.length<5?t:t.slice(1)),[{id:n,text:e}])}))},v=function(e){return f((function(t){return Object(i.a)(t.filter((function(t){return t.id!==e})))}))};return a.a.createElement(s.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(O,null),a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/login"},a.a.createElement(j,null)),a.a.createElement(u.b,{exact:!0,path:"/register"},a.a.createElement(k,null)),a.a.createElement(u.b,{path:"/board/:id"},a.a.createElement(p,null),a.a.createElement(Z,{addToast:h})),a.a.createElement(u.b,{exact:!0,path:"/"},a.a.createElement(p,null),a.a.createElement(ue,{addToast:h})),a.a.createElement(u.b,{path:"*"},a.a.createElement("h1",null,"Not Found"))),a.a.createElement(se,{data:d,delToast:v})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=[a.a.createElement(b.Provider,null)],fe=function(e){var t=e.children;return de.reduce((function(e,t){return Object(r.cloneElement)(t,{children:e})}),t)};c.a.render(a.a.createElement(fe,null,a.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[112,1,2]]]);
//# sourceMappingURL=main.352d8193.chunk.js.map